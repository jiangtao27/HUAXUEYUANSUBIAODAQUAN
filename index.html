<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…ƒç´ å‘¨æœŸè¡¨æ·±åº¦æ¢ç´¢ | Kimi AIå¢å¼ºç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans SC', 'sans-serif'],
                    },
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#8B5CF6',
                        accent: '#F59E0B',
                        dark: '#0F172A',
                        'dark-light': '#1E293B',
                        'kimi': '#E86C3A',
                        'kimi-light': '#FF8C69',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .element-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .element-card:hover {
            transform: scale(1.1) translateY(-5px);
            z-index: 50;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.2);
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .category-alkali { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); }
        .category-alkaline { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); }
        .category-transition { background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); }
        .category-basic { background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); }
        .category-noble { background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); }
        .category-halogen { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); }
        .category-metalloid { background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%); }
        .category-nonmetal { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
        .category-lanthanide { background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); }
        .category-actinide { background: linear-gradient(135deg, #f43f5e 0%, #e11d48 100%); }
        
        .chat-message {
            max-width: 85%;
            word-wrap: break-word;
        }
        
        .markdown-content {
            line-height: 1.8;
            font-size: 0.95rem;
        }
        
        .markdown-content h1 { 
            font-size: 1.5rem; 
            font-weight: 700; 
            margin: 1.5rem 0 1rem; 
            color: #fb923c; 
            border-bottom: 2px solid rgba(251, 146, 60, 0.3);
            padding-bottom: 0.5rem;
        }
        .markdown-content h2 { 
            font-size: 1.25rem; 
            font-weight: 600; 
            margin: 1.25rem 0 0.75rem; 
            color: #fdba74; 
            border-left: 4px solid #E86C3A;
            padding-left: 0.75rem;
        }
        .markdown-content h3 { 
            font-size: 1.1rem; 
            font-weight: 600; 
            margin: 1rem 0 0.5rem; 
            color: #fed7aa; 
        }
        .markdown-content h4 { 
            font-size: 1rem; 
            font-weight: 600; 
            margin: 0.75rem 0 0.5rem; 
            color: #ffedd5; 
        }
        
        .markdown-content p { 
            margin: 0.75rem 0; 
            text-align: justify;
        }
        
        .markdown-content ul, .markdown-content ol { 
            margin: 0.75rem 0; 
            padding-left: 1.5rem; 
        }
        .markdown-content ul { list-style-type: none; }
        .markdown-content ul li { 
            position: relative; 
            margin: 0.5rem 0;
            padding-left: 0.5rem;
        }
        .markdown-content ul li::before {
            content: "â€¢";
            color: #fb923c;
            font-weight: bold;
            position: absolute;
            left: -1rem;
            font-size: 1.2rem;
            line-height: 1.5;
        }
        .markdown-content ol { 
            list-style-type: decimal; 
            color: #e2e8f0;
        }
        .markdown-content ol li { 
            margin: 0.5rem 0;
            padding-left: 0.25rem;
        }
        .markdown-content li > p { margin: 0.25rem 0; }
        
        .markdown-content code { 
            background: rgba(0,0,0,0.4); 
            padding: 0.2rem 0.4rem; 
            border-radius: 4px; 
            font-family: 'Courier New', monospace; 
            font-size: 0.85em;
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.2);
        }
        .markdown-content pre { 
            background: rgba(0,0,0,0.5); 
            padding: 1rem; 
            border-radius: 8px; 
            overflow-x: auto; 
            margin: 1rem 0;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }
        .markdown-content pre::before {
            content: "CODE";
            position: absolute;
            top: 0.25rem;
            right: 0.5rem;
            font-size: 0.7rem;
            color: #64748b;
            font-weight: bold;
        }
        .markdown-content pre code { 
            background: none; 
            padding: 0; 
            color: #e2e8f0;
            border: none;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        .markdown-content blockquote { 
            border-left: 4px solid #E86C3A; 
            padding: 0.5rem 1rem; 
            margin: 1rem 0;
            color: #94a3b8;
            font-style: italic;
            background: rgba(232, 108, 58, 0.1);
            border-radius: 0 8px 8px 0;
        }
        .markdown-content blockquote p { margin: 0.25rem 0; }
        
        .markdown-content strong { 
            color: #fb923c; 
            font-weight: 700;
            background: rgba(251, 146, 60, 0.1);
            padding: 0 0.2rem;
            border-radius: 3px;
        }
        .markdown-content em { 
            color: #a5b4fc; 
            font-style: italic;
        }
        .markdown-content del { 
            color: #64748b; 
            text-decoration: line-through;
        }
        
        .markdown-content table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 1rem 0;
            font-size: 0.9rem;
            border-radius: 8px;
            overflow: hidden;
        }
        .markdown-content th, .markdown-content td { 
            border: 1px solid rgba(255,255,255,0.1); 
            padding: 0.6rem; 
            text-align: left; 
        }
        .markdown-content th { 
            background: rgba(232, 108, 58, 0.4); 
            font-weight: 600;
            color: #fb923c;
        }
        .markdown-content tr:nth-child(even) {
            background: rgba(255,255,255,0.03);
        }
        .markdown-content tr:hover {
            background: rgba(232, 108, 58, 0.15);
        }
        
        .markdown-content hr {
            border: none;
            border-top: 2px solid rgba(232, 108, 58, 0.3);
            margin: 1.5rem 0;
        }
        
        .typing-cursor::after {
            content: 'â–Š';
            animation: blink 1s infinite;
            color: #E86C3A;
            margin-left: 2px;
        }
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .periodic-grid {
            display: grid;
            grid-template-columns: repeat(18, minmax(0, 1fr));
            gap: 4px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        @media (max-width: 1024px) {
            .periodic-grid {
                grid-template-columns: repeat(8, 1fr);
                gap: 2px;
            }
            .element-card {
                min-height: 60px;
            }
            .element-card .text-2xl {
                font-size: 1rem;
            }
        }
        
        @media (max-width: 640px) {
            .periodic-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 2px;
            }
            .element-card {
                min-height: 50px;
            }
            .chat-message {
                max-width: 90%;
            }
        }
        
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #E86C3A; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #FF8C69; 
        }

        .atom-container {
            position: relative;
            width: 100%;
            height: 320px;
            background: radial-gradient(circle at center, rgba(20, 30, 50, 0.8) 0%, rgba(15, 23, 42, 0.95) 100%);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(232, 108, 58, 0.3);
            box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.5);
        }
        
        .atom-canvas {
            width: 100%;
            height: 100%;
        }
        
        .electron-legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.6);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 11px;
            color: #94a3b8;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* å¯æ‹–åŠ¨è°ƒæ•´æ¡æ ·å¼ */
        .resize-handle {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            cursor: col-resize;
            background: transparent;
            transition: background 0.2s;
            z-index: 60;
        }
        
        .resize-handle:hover,
        .resize-handle.dragging {
            background: linear-gradient(to bottom, #E86C3A, #FF8C69);
            box-shadow: 0 0 10px rgba(232, 108, 58, 0.5);
            width: 6px;
        }

        .resize-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: #E86C3A;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 100;
            border: 1px solid rgba(232, 108, 58, 0.3);
        }

        .resize-indicator.visible {
            opacity: 1;
        }

        /* æ‹–åŠ¨æ—¶ç¦ç”¨æ–‡æœ¬é€‰æ‹© */
        .no-select {
            user-select: none;
            -webkit-user-select: none;
        }
    </style>
</head>
<body class="bg-dark text-gray-100 font-sans overflow-x-hidden">

    <!-- èƒŒæ™¯åŠ¨ç”» -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute top-0 left-0 w-96 h-96 bg-kimi/20 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float"></div>
        <div class="absolute top-0 right-0 w-96 h-96 bg-orange-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float" style="animation-delay: 2s;"></div>
        <div class="absolute bottom-0 left-1/2 w-96 h-96 bg-red-500/20 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-float" style="animation-delay: 4s;"></div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <nav class="fixed top-0 w-full z-50 glass-panel border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-slate-800 border border-gray-600 flex items-center justify-center text-xl font-bold text-white shadow-lg">
                        âš›ï¸
                    </div>
                    <div>
                        <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-orange-400 to-red-400">
                            Elements Pro
                        </h1>
                        <p class="text-xs text-gray-400">Kimi AIå¢å¼ºå‹æ·±åº¦å…ƒç´ å‘¨æœŸè¡¨</p>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                    <button onclick="toggleAIChat()" class="flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-kimi to-kimi-light hover:from-orange-600 hover:to-red-600 transition-all shadow-lg hover:shadow-orange-500/25 text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                        <span class="hidden sm:inline">Kimi AIåŠ©æ‰‹</span>
                    </button>
                    <button onclick="toggleSettings()" class="p-2 rounded-full hover:bg-gray-700 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="relative z-10 pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-[1600px] mx-auto">
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="mb-8 flex flex-wrap gap-4 items-center justify-between glass-panel p-4 rounded-2xl">
            <div class="flex items-center gap-4 flex-wrap">
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="æœç´¢å…ƒç´ ï¼ˆåç§°ã€ç¬¦å·ã€åºå·ï¼‰..." 
                           class="pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-kimi focus:border-transparent w-64 text-sm"
                           oninput="searchElements(this.value)">
                    <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                <select id="categoryFilter" onchange="filterByCategory(this.value)" 
                        class="px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:ring-2 focus:ring-kimi text-sm">
                    <option value="all">å…¨éƒ¨åˆ†ç±»</option>
                    <option value="alkali">ç¢±é‡‘å±</option>
                    <option value="alkaline">ç¢±åœŸé‡‘å±</option>
                    <option value="transition">è¿‡æ¸¡é‡‘å±</option>
                    <option value="basic">è´«é‡‘å±</option>
                    <option value="metalloid">ç±»é‡‘å±</option>
                    <option value="nonmetal">éé‡‘å±</option>
                    <option value="halogen">å¤ç´ </option>
                    <option value="noble">ç¨€æœ‰æ°”ä½“</option>
                    <option value="lanthanide">é•§ç³»å…ƒç´ </option>
                    <option value="actinide">é”•ç³»å…ƒç´ </option>
                </select>
            </div>
            <div class="flex gap-2 text-xs flex-wrap">
                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded category-alkali"></span>ç¢±é‡‘å±</span>
                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded category-alkaline"></span>ç¢±åœŸé‡‘å±</span>
                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded category-transition"></span>è¿‡æ¸¡é‡‘å±</span>
                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded category-nonmetal"></span>éé‡‘å±</span>
                <span class="flex items-center gap-1"><span class="w-3 h-3 rounded category-noble"></span>ç¨€æœ‰æ°”ä½“</span>
            </div>
        </div>

        <!-- å‘¨æœŸè¡¨å®¹å™¨ -->
        <div class="overflow-x-auto pb-4">
            <div id="periodicTable" class="periodic-grid mb-8 min-w-[1000px] lg:min-w-0">
                <!-- å…ƒç´ å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

    </main>

    <!-- è¯¦æƒ…é¢æ¿ -->
    <div id="detailPanel" class="fixed inset-y-0 right-0 w-full md:w-[600px] glass-panel transform translate-x-full transition-transform duration-300 z-50 overflow-y-auto border-l border-gray-700 shadow-2xl">
        <div class="p-6">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h2 id="detailName" class="text-4xl font-bold mb-1"></h2>
                    <p id="detailSymbol" class="text-6xl font-light text-gray-400"></p>
                </div>
                <button onclick="closeDetail()" class="p-2 hover:bg-gray-700 rounded-full transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div id="detailContent" class="space-y-6">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>
    </div>

    <!-- AIèŠå¤©ä¾§è¾¹æ  - å¢åŠ å¯æ‹–åŠ¨è°ƒæ•´å®½åº¦ -->
    <div id="aiChat" class="fixed inset-y-0 right-0 w-full md:w-[480px] glass-panel transform translate-x-full transition-transform duration-300 z-50 border-l border-gray-700 shadow-2xl flex flex-col" style="max-width: 90vw;">
        <!-- æ‹–åŠ¨è°ƒæ•´æ¡ -->
        <div id="resizeHandle" class="resize-handle hidden md:block" title="æŒ‰ä½å‘å·¦æ‹–åŠ¨è°ƒæ•´å®½åº¦"></div>
        
        <div class="p-4 border-b border-gray-700 flex justify-between items-center bg-gray-800/50 relative">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-slate-800 border border-gray-600 flex items-center justify-center text-sm text-white shadow-md">
                    ğŸ§ 
                </div>
                <div>
                    <h3 class="font-semibold text-orange-400">Kimi åŒ–å­¦åŠ©æ‰‹</h3>
                    <p class="text-xs text-gray-400" id="chatStatus">åŸºäº Moonshot AI â€¢ æ”¯æŒä¸Šä¸‹æ–‡</p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <button onclick="clearChatHistory()" class="p-2 hover:bg-gray-700 rounded-full text-gray-400 hover:text-red-400 transition-colors" title="æ¸…ç©ºèŠå¤©è®°å½•">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                </button>
                <button onclick="toggleAIChat()" class="p-2 hover:bg-gray-700 rounded-full">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
        </div>
        
        <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-4">
            <div class="flex gap-3 animate-fade-in">
                <div class="w-8 h-8 rounded-full bg-slate-800 border border-gray-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-md">
                    ğŸ§ 
                </div>
                <div class="chat-message bg-gray-700/50 rounded-2xl rounded-tl-none p-4 text-sm markdown-content">
                    <p>ä½ å¥½ï¼æˆ‘æ˜¯KimiåŒ–å­¦åŠ©æ‰‹ã€‚</p>
                    <p>æˆ‘å¯ä»¥å¸®ä½ è§£ç­”ï¼š</p>
                    <ul>
                        <li>å…ƒç´ æ€§è´¨ä¸åŒ–å­¦ååº”</li>
                        <li>å†å²èƒŒæ™¯ä¸åº”ç”¨åœºæ™¯</li>
                        <li>åŒä½ç´ ä¸åŒ–åˆç‰©ä¿¡æ¯</li>
                    </ul>
                    <p>æˆ‘ä¼šè®°ä½æˆ‘ä»¬çš„å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œä½ å¯ä»¥ç»§ç»­è¿½é—®ä¹‹å‰çš„è¯é¢˜ã€‚</p>
                    <p class="text-xs text-gray-500 mt-2">ğŸ’¡ æç¤ºï¼šé¼ æ ‡æ‚¬åœåœ¨å·¦ä¾§è¾¹ç¼˜å¯è°ƒæ•´é¢æ¿å®½åº¦</p>
                </div>
            </div>
        </div>

        <div class="p-4 border-t border-gray-700 bg-gray-800/30">
            <div id="apiKeyInput" class="mb-3">
                <input type="password" id="moonshotApiKey" placeholder="è¾“å…¥ Moonshot API Key..." 
                       class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-xs focus:ring-2 focus:ring-kimi text-orange-400 placeholder-gray-600">
                <p class="text-xs text-gray-500 mt-1">API Keyä»…å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ | <a href="https://platform.moonshot.cn/" target="_blank" class="text-orange-400 hover:underline">è·å–å¯†é’¥</a></p>
            </div>
            <div class="flex gap-2">
                <input type="text" id="chatInput" placeholder="è¯¢é—®å…³äºæ­¤å…ƒç´ ..." 
                       class="flex-1 px-4 py-2 bg-gray-900 border border-gray-600 rounded-lg focus:ring-2 focus:ring-kimi text-sm"
                       onkeypress="if(event.key==='Enter') sendMessage()">
                <button onclick="sendMessage()" class="px-4 py-2 bg-kimi hover:bg-kimi-light rounded-lg transition-colors text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                </button>
            </div>
            <div class="mt-2 flex justify-between items-center text-xs text-gray-500">
                <span id="historyCount">å½“å‰å¯¹è¯ï¼š0 è½®</span>
                <span class="text-gray-600">æŒ‰ Enter å‘é€</span>
            </div>
        </div>
    </div>

    <!-- å®½åº¦æ˜¾ç¤ºæŒ‡ç¤ºå™¨ -->
    <div id="resizeIndicator" class="resize-indicator">
        å®½åº¦: <span id="widthValue">480</span>px
    </div>

    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div id="settingsModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center p-4">
        <div class="glass-panel rounded-2xl p-6 max-w-md w-full border border-gray-700 shadow-2xl">
            <h3 class="text-xl font-bold mb-4 text-orange-400">Moonshot APIè®¾ç½®</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">Moonshot API Key</label>
                    <input type="password" id="settingsApiKey" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-sm text-orange-400 focus:border-kimi focus:ring-1 focus:ring-kimi">
                    <p class="text-xs text-gray-500 mt-1">ä» <a href="https://platform.moonshot.cn/" target="_blank" class="text-orange-400 hover:underline">Moonshot å¼€æ”¾å¹³å°</a> è·å–</p>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-gray-300">æ¨¡å‹é€‰æ‹©</label>
                    <select id="modelSelect" class="w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-sm focus:border-kimi focus:ring-1 focus:ring-kimi">
                        <option value="moonshot-v1-8k" selected>moonshot-v1-8kï¼ˆæ ‡å‡†ï¼‰</option>
                        <option value="moonshot-v1-32k">moonshot-v1-32kï¼ˆé•¿æ–‡æœ¬ï¼‰</option>
                        <option value="moonshot-v1-128k">moonshot-v1-128kï¼ˆè¶…é•¿æ–‡æœ¬ï¼‰</option>
                        <option value="moonshot-v1-auto">moonshot-v1-autoï¼ˆè‡ªåŠ¨ï¼‰</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">æ¨èä½¿ç”¨ moonshot-v1-8k æˆ– moonshot-v1-32k</p>
                </div>
                <div class="flex gap-2 pt-4">
                    <button onclick="saveSettings()" class="flex-1 py-2 bg-kimi hover:bg-kimi-light rounded-lg transition-colors text-white font-medium">ä¿å­˜è®¾ç½®</button>
                    <button onclick="toggleSettings()" class="flex-1 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Markdownè§£æå™¨ï¼ˆè½»é‡çº§ï¼‰
        class MarkdownParser {
            static parse(text) {
                if (!text) return '';
                
                let html = text.replace(/&/g, '&amp;')
                              .replace(/</g, '&lt;')
                              .replace(/>/g, '&gt;');
                
                html = html.replace(/```(\w*)\n([\s\S]*?)```/g, '<pre><code>$2</code></pre>');
                html = html.replace(/`([^`]+)`/g, '<code>$1</code>');
                html = html.replace(/^#### (.*$)/gim, '<h4>$1</h4>');
                html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');
                html = html.replace(/^## (.*$)/gim, '<h2>$1</h2>');
                html = html.replace(/^# (.*$)/gim, '<h1>$1</h1>');
                html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
                html = html.replace(/~~(.*?)~~/g, '<del>$1</del>');
                html = html.replace(/^&gt; (.*$)/gim, '<blockquote>$1</blockquote>');
                html = html.replace(/^---$/gim, '<hr>');
                html = html.replace(/((?:\|.*\|(?:\n|$))+)/g, (match) => {
                    const rows = match.trim().split('\n');
                    if (rows.length < 2) return match;
                    
                    let table = '<table>';
                    rows.forEach((row, i) => {
                        if (row.includes('---')) return;
                        const cells = row.split('|').filter(c => c.trim());
                        const tag = i === 0 ? 'th' : 'td';
                        table += '<tr>' + cells.map(c => `<${tag}>${c.trim()}</${tag}>`).join('') + '</tr>';
                    });
                    table += '</table>';
                    return table;
                });
                html = html.replace(/(?:^|\n)((?:- .*(?:\n|$))+)/g, (match) => {
                    const items = match.trim().split('\n');
                    return '<ul>' + items.map(item => `<li>${item.replace(/^- /, '')}</li>`).join('') + '</ul>';
                });
                html = html.replace(/(?:^|\n)((?:\d+\. .*(?:\n|$))+)/g, (match) => {
                    const items = match.trim().split('\n');
                    return '<ol>' + items.map(item => `<li>${item.replace(/^\d+\. /, '')}</li>`).join('') + '</ol>';
                });
                html = html.replace(/\n\n/g, '</p><p>');
                html = html.replace(/\n/g, '<br>');
                
                if (!html.startsWith('<')) {
                    html = '<p>' + html + '</p>';
                }
                html = html.replace(/<p>(<h[1-6]>)/g, '$1');
                html = html.replace(/(<\/h[1-6]>)<\/p>/g, '$1');
                html = html.replace(/<p>(<ul>)/g, '$1');
                html = html.replace(/(<\/ul>)<\/p>/g, '$1');
                html = html.replace(/<p>(<ol>)/g, '$1');
                html = html.replace(/(<\/ol>)<\/p>/g, '$1');
                html = html.replace(/<p>(<blockquote>)/g, '$1');
                html = html.replace(/(<\/blockquote>)<\/p>/g, '$1');
                html = html.replace(/<p>(<pre>)/g, '$1');
                html = html.replace(/(<\/pre>)<\/p>/g, '$1');
                html = html.replace(/<p>(<table>)/g, '$1');
                html = html.replace(/(<\/table>)<\/p>/g, '$1');
                html = html.replace(/<p><\/p>/g, '');
                
                return html;
            }
        }

        // æ‰“å­—æœºæ•ˆæœç±»
        class Typewriter {
            constructor(element, text, speed = 5) {
                this.element = element;
                this.text = text;
                this.speed = speed;
                this.index = 0;
                this.isRunning = false;
                this.renderedContent = '';
                
                this.pauseTime = {
                    'ã€‚': 80, 'ï¼Œ': 60, '.': 80, ',': 60, '!': 100, '?': 100,
                    'ï¼Ÿ': 100, 'ï¼': 100, ':': 70, 'ï¼š': 70, ';': 70, 'ï¼›': 70, '\n': 100
                };
            }
            
            start() {
                this.isRunning = true;
                this.element.innerHTML = '';
                this.element.classList.add('typing-cursor');
                this.type();
                return this;
            }
            
            type() {
                if (!this.isRunning) return;
                
                if (this.index < this.text.length) {
                    const char = this.text[this.index];
                    this.renderedContent += char;
                    
                    if (this.index % 10 === 0 || char === '\n' || char === '.' || char === 'ã€‚') {
                        this.element.innerHTML = MarkdownParser.parse(this.renderedContent);
                        const container = this.element.closest('#chatMessages');
                        if (container) {
                            container.scrollTop = container.scrollHeight;
                        }
                    }
                    
                    this.index++;
                    let delay = this.speed;
                    if (this.pauseTime[char]) delay += this.pauseTime[char];
                    setTimeout(() => this.type(), delay);
                } else {
                    this.stop();
                    this.element.innerHTML = MarkdownParser.parse(this.text);
                }
            }
            
            stop() {
                this.isRunning = false;
                this.element.classList.remove('typing-cursor');
            }
            
            skip() {
                this.stop();
                this.element.innerHTML = MarkdownParser.parse(this.text);
            }
        }

        // å¯æ‹–åŠ¨è°ƒæ•´å®½åº¦ç®¡ç†å™¨
        class ResizeManager {
            constructor() {
                this.chatPanel = document.getElementById('aiChat');
                this.resizeHandle = document.getElementById('resizeHandle');
                this.indicator = document.getElementById('resizeIndicator');
                this.widthValue = document.getElementById('widthValue');
                this.isResizing = false;
                this.startX = 0;
                this.startWidth = 0;
                this.minWidth = 480;
                this.maxWidth = window.innerWidth * 0.9;
                
                this.init();
            }
            
            init() {
                // åªåœ¨æ¡Œé¢ç«¯å¯ç”¨
                if (window.innerWidth >= 768) {
                    this.resizeHandle.addEventListener('mousedown', (e) => this.startResize(e));
                    document.addEventListener('mousemove', (e) => this.onResize(e));
                    document.addEventListener('mouseup', () => this.stopResize());
                    
                    // è§¦æ‘¸æ”¯æŒ
                    this.resizeHandle.addEventListener('touchstart', (e) => this.startResize(e.touches[0]));
                    document.addEventListener('touchmove', (e) => this.onResize(e.touches[0]));
                    document.addEventListener('touchend', () => this.stopResize());
                }
                
                window.addEventListener('resize', () => {
                    this.maxWidth = window.innerWidth * 0.9;
                    // å¦‚æœå½“å‰å®½åº¦è¶…è¿‡æ–°çš„æœ€å¤§å€¼ï¼Œè°ƒæ•´å›æ¥
                    const currentWidth = parseInt(getComputedStyle(this.chatPanel).width);
                    if (currentWidth > this.maxWidth) {
                        this.chatPanel.style.width = this.maxWidth + 'px';
                    }
                });
            }
            
            startResize(e) {
                this.isResizing = true;
                this.startX = e.clientX;
                this.startWidth = parseInt(getComputedStyle(this.chatPanel).width);
                
                this.resizeHandle.classList.add('dragging');
                document.body.classList.add('no-select');
                document.body.style.cursor = 'col-resize';
                
                // æ˜¾ç¤ºæŒ‡ç¤ºå™¨
                this.indicator.classList.add('visible');
                this.widthValue.textContent = this.startWidth;
                
                e.preventDefault();
            }
            
            onResize(e) {
                if (!this.isResizing) return;
                
                const deltaX = this.startX - e.clientX; // å‘å·¦æ‹–åŠ¨ä¸ºæ­£å€¼ï¼ˆåŠ å®½ï¼‰
                let newWidth = this.startWidth + deltaX;
                
                // é™åˆ¶èŒƒå›´
                newWidth = Math.max(this.minWidth, Math.min(this.maxWidth, newWidth));
                
                this.chatPanel.style.width = newWidth + 'px';
                this.widthValue.textContent = Math.round(newWidth);
            }
            
            stopResize() {
                if (!this.isResizing) return;
                
                this.isResizing = false;
                this.resizeHandle.classList.remove('dragging');
                document.body.classList.remove('no-select');
                document.body.style.cursor = '';
                
                // éšè—æŒ‡ç¤ºå™¨ï¼ˆå»¶è¿Ÿä¸€ç‚¹ï¼Œè®©ç”¨æˆ·çœ‹åˆ°æœ€ç»ˆå®½åº¦ï¼‰
                setTimeout(() => {
                    this.indicator.classList.remove('visible');
                }, 500);
                
                // ä¿å­˜ç”¨æˆ·åå¥½å®½åº¦åˆ°æœ¬åœ°å­˜å‚¨
                const finalWidth = parseInt(getComputedStyle(this.chatPanel).width);
                localStorage.setItem('chatPanelWidth', finalWidth);
            }
            
            // æ¢å¤ä¿å­˜çš„å®½åº¦
            restoreWidth() {
                const savedWidth = localStorage.getItem('chatPanelWidth');
                if (savedWidth && window.innerWidth >= 768) {
                    const width = parseInt(savedWidth);
                    if (width >= this.minWidth && width <= this.maxWidth) {
                        this.chatPanel.style.width = width + 'px';
                    }
                }
            }
        }

        // å…ƒç´ æ•°æ®
        const elements = [
            { number: 1, symbol: 'H', name: 'æ°¢', mass: '1.008', category: 'nonmetal', group: 1, period: 1, config: '1sÂ¹', electronegativity: '2.20', radius: '53', melting: '-259.1', boiling: '-252.9', discoverer: 'Henry Cavendish', year: '1766', desc: 'å®‡å®™ä¸­æœ€ä¸°å¯Œçš„å…ƒç´ ï¼Œå æ‰€æœ‰æ™®é€šç‰©è´¨é‡çš„75%ã€‚' },
            { number: 2, symbol: 'He', name: 'æ°¦', mass: '4.0026', category: 'noble', group: 18, period: 1, config: '1sÂ²', electronegativity: '-', radius: '31', melting: '-272.2', boiling: '-268.9', discoverer: 'Pierre Janssen', year: '1868', desc: 'ç¬¬äºŒè½»çš„å…ƒç´ ï¼Œç”¨äºæ°”çƒå’Œä½æ¸©å†·å´ã€‚' },
            { number: 3, symbol: 'Li', name: 'é”‚', mass: '6.94', category: 'alkali', group: 1, period: 2, config: '[He] 2sÂ¹', electronegativity: '0.98', radius: '167', melting: '180.5', boiling: '1342', discoverer: 'Johan August Arfwedson', year: '1817', desc: 'æœ€è½»çš„é‡‘å±ï¼Œå¹¿æ³›ç”¨äºç”µæ± åˆ¶é€ ã€‚' },
            { number: 4, symbol: 'Be', name: 'é“', mass: '9.0122', category: 'alkaline', group: 2, period: 2, config: '[He] 2sÂ²', electronegativity: '1.57', radius: '112', melting: '1287', boiling: '2469', discoverer: 'Louis Nicolas Vauquelin', year: '1798', desc: 'è½»è€Œåšç¡¬çš„é‡‘å±ï¼Œç”¨äºèˆªç©ºèˆªå¤©åˆé‡‘ã€‚' },
            { number: 5, symbol: 'B', name: 'ç¡¼', mass: '10.81', category: 'metalloid', group: 13, period: 2, config: '[He] 2sÂ² 2pÂ¹', electronegativity: '2.04', radius: '87', melting: '2077', boiling: '4000', discoverer: 'Joseph Louis Gay-Lussac', year: '1808', desc: 'ç”¨äºç¡¼ç¡…é…¸ç›ç»ç’ƒå’Œæ¤ç‰©è¥å…»ã€‚' },
            { number: 6, symbol: 'C', name: 'ç¢³', mass: '12.011', category: 'nonmetal', group: 14, period: 2, config: '[He] 2sÂ² 2pÂ²', electronegativity: '2.55', radius: '67', melting: '3550', boiling: '4027', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'ç”Ÿå‘½çš„åŸºç¡€å…ƒç´ ï¼Œå­˜åœ¨é’»çŸ³ã€çŸ³å¢¨ç­‰å¤šç§å½¢å¼ã€‚' },
            { number: 7, symbol: 'N', name: 'æ°®', mass: '14.007', category: 'nonmetal', group: 15, period: 2, config: '[He] 2sÂ² 2pÂ³', electronegativity: '3.04', radius: '56', melting: '-210.1', boiling: '-195.8', discoverer: 'Daniel Rutherford', year: '1772', desc: 'å¤§æ°”ä¸­å«é‡æœ€å¤šçš„å…ƒç´ ï¼ˆ78%ï¼‰ï¼Œå¯¹è›‹ç™½è´¨è‡³å…³é‡è¦ã€‚' },
            { number: 8, symbol: 'O', name: 'æ°§', mass: '15.999', category: 'nonmetal', group: 16, period: 2, config: '[He] 2sÂ² 2pâ´', electronegativity: '3.44', radius: '48', melting: '-218.8', boiling: '-183.0', discoverer: 'Carl Wilhelm Scheele', year: '1774', desc: 'åœ°å£³ä¸­å«é‡æœ€å¤šçš„å…ƒç´ ï¼Œç”Ÿå‘½å¿…éœ€ã€‚' },
            { number: 9, symbol: 'F', name: 'æ°Ÿ', mass: '18.998', category: 'halogen', group: 17, period: 2, config: '[He] 2sÂ² 2pâµ', electronegativity: '3.98', radius: '42', melting: '-219.6', boiling: '-188.1', discoverer: 'Henri Moissan', year: '1886', desc: 'ç”µè´Ÿæ€§æœ€å¼ºçš„å…ƒç´ ï¼Œé«˜åº¦ååº”æ€§ã€‚' },
            { number: 10, symbol: 'Ne', name: 'æ°–', mass: '20.180', category: 'noble', group: 18, period: 2, config: '[He] 2sÂ² 2pâ¶', electronegativity: '-', radius: '38', melting: '-248.6', boiling: '-246.1', discoverer: 'William Ramsay', year: '1898', desc: 'ç”¨äºéœ“è™¹ç¯å’Œä½æ¸©å†·å´ã€‚' },
            { number: 11, symbol: 'Na', name: 'é’ ', mass: '22.990', category: 'alkali', group: 1, period: 3, config: '[Ne] 3sÂ¹', electronegativity: '0.93', radius: '190', melting: '97.79', boiling: '883', discoverer: 'Humphry Davy', year: '1807', desc: 'é«˜ååº”æ€§é‡‘å±ï¼Œé£Ÿç›çš„ä¸»è¦æˆåˆ†ã€‚' },
            { number: 12, symbol: 'Mg', name: 'é•', mass: '24.305', category: 'alkaline', group: 2, period: 3, config: '[Ne] 3sÂ²', electronegativity: '1.31', radius: '145', melting: '650', boiling: '1090', discoverer: 'Joseph Black', year: '1755', desc: 'è½»é‡‘å±ï¼Œç”¨äºåˆé‡‘å’Œé—ªå…‰ç²‰ã€‚' },
            { number: 13, symbol: 'Al', name: 'é“', mass: '26.982', category: 'basic', group: 13, period: 3, config: '[Ne] 3sÂ² 3pÂ¹', electronegativity: '1.61', radius: '118', melting: '660.3', boiling: '2519', discoverer: 'Hans Christian Ã˜rsted', year: '1825', desc: 'åœ°å£³ä¸­å«é‡æœ€å¤šçš„é‡‘å±ï¼Œè½»ä¾¿è€è…èš€ã€‚' },
            { number: 14, symbol: 'Si', name: 'ç¡…', mass: '28.085', category: 'metalloid', group: 14, period: 3, config: '[Ne] 3sÂ² 3pÂ²', electronegativity: '1.90', radius: '111', melting: '1414', boiling: '3265', discoverer: 'JÃ¶ns Jacob Berzelius', year: '1824', desc: 'åŠå¯¼ä½“å·¥ä¸šçš„åŸºç¡€ï¼Œåœ°å£³ä¸­å«é‡ç¬¬äºŒã€‚' },
            { number: 15, symbol: 'P', name: 'ç£·', mass: '30.974', category: 'nonmetal', group: 15, period: 3, config: '[Ne] 3sÂ² 3pÂ³', electronegativity: '2.19', radius: '98', melting: '44.15', boiling: '280.5', discoverer: 'Hennig Brand', year: '1669', desc: 'ç”Ÿå‘½å¿…éœ€å…ƒç´ ï¼Œå­˜åœ¨äºDNAå’Œéª¨éª¼ä¸­ã€‚' },
            { number: 16, symbol: 'S', name: 'ç¡«', mass: '32.06', category: 'nonmetal', group: 16, period: 3, config: '[Ne] 3sÂ² 3pâ´', electronegativity: '2.58', radius: '88', melting: '115.2', boiling: '444.6', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'ç”¨äºåˆ¶é€ ç¡«é…¸å’Œæ©¡èƒ¶ç¡«åŒ–ã€‚' },
            { number: 17, symbol: 'Cl', name: 'æ°¯', mass: '35.45', category: 'halogen', group: 17, period: 3, config: '[Ne] 3sÂ² 3pâµ', electronegativity: '3.16', radius: '79', melting: '-101.5', boiling: '-34.04', discoverer: 'Carl Wilhelm Scheele', year: '1774', desc: 'ç”¨äºæ¶ˆæ¯’å’ŒPVCå¡‘æ–™åˆ¶é€ ã€‚' },
            { number: 18, symbol: 'Ar', name: 'æ°©', mass: '39.948', category: 'noble', group: 18, period: 3, config: '[Ne] 3sÂ² 3pâ¶', electronegativity: '-', radius: '71', melting: '-189.3', boiling: '-185.8', discoverer: 'Lord Rayleigh', year: '1894', desc: 'å¤§æ°”ä¸­å«é‡æœ€å¤šçš„ç¨€æœ‰æ°”ä½“ã€‚' },
            { number: 19, symbol: 'K', name: 'é’¾', mass: '39.098', category: 'alkali', group: 1, period: 4, config: '[Ar] 4sÂ¹', electronegativity: '0.82', radius: '243', melting: '63.5', boiling: '759', discoverer: 'Humphry Davy', year: '1807', desc: 'å¯¹ç¥ç»åŠŸèƒ½å’Œæ¤ç‰©ç”Ÿé•¿è‡³å…³é‡è¦ã€‚' },
            { number: 20, symbol: 'Ca', name: 'é’™', mass: '40.078', category: 'alkaline', group: 2, period: 4, config: '[Ar] 4sÂ²', electronegativity: '1.00', radius: '194', melting: '842', boiling: '1484', discoverer: 'Humphry Davy', year: '1808', desc: 'éª¨éª¼å’Œç‰™é½¿çš„ä¸»è¦æˆåˆ†ï¼Œç¬¬äº”ä¸°å¯Œçš„å…ƒç´ ã€‚' },
            { number: 21, symbol: 'Sc', name: 'é’ª', mass: '44.956', category: 'transition', group: 3, period: 4, config: '[Ar] 3dÂ¹ 4sÂ²', electronegativity: '1.36', radius: '184', melting: '1541', boiling: '2836', discoverer: 'Lars Fredrik Nilson', year: '1879', desc: 'è½»è´¨é«˜å¼ºåº¦åˆé‡‘å…ƒç´ ã€‚' },
            { number: 22, symbol: 'Ti', name: 'é’›', mass: '47.867', category: 'transition', group: 4, period: 4, config: '[Ar] 3dÂ² 4sÂ²', electronegativity: '1.54', radius: '176', melting: '1668', boiling: '3287', discoverer: 'William Gregor', year: '1791', desc: 'é«˜å¼ºåº¦ä½å¯†åº¦é‡‘å±ï¼Œç”¨äºèˆªç©ºèˆªå¤©ã€‚' },
            { number: 23, symbol: 'V', name: 'é’’', mass: '50.942', category: 'transition', group: 5, period: 4, config: '[Ar] 3dÂ³ 4sÂ²', electronegativity: '1.63', radius: '171', melting: '1910', boiling: '3407', discoverer: 'AndrÃ©s Manuel del RÃ­o', year: '1801', desc: 'ç”¨äºé«˜å¼ºåº¦é’¢å’Œå‚¬åŒ–å‰‚ã€‚' },
            { number: 24, symbol: 'Cr', name: 'é“¬', mass: '51.996', category: 'transition', group: 6, period: 4, config: '[Ar] 3dâµ 4sÂ¹', electronegativity: '1.66', radius: '166', melting: '1907', boiling: '2671', discoverer: 'Louis Nicolas Vauquelin', year: '1797', desc: 'ä¸é”ˆé’¢çš„ä¸»è¦æˆåˆ†ï¼Œæä¾›è€è…èš€æ€§ã€‚' },
            { number: 25, symbol: 'Mn', name: 'é”°', mass: '54.938', category: 'transition', group: 7, period: 4, config: '[Ar] 3dâµ 4sÂ²', electronegativity: '1.55', radius: '161', melting: '1246', boiling: '2061', discoverer: 'Torbern Olof Bergman', year: '1774', desc: 'ç”¨äºé’¢é“ç”Ÿäº§å’Œç”µæ± ã€‚' },
            { number: 26, symbol: 'Fe', name: 'é“', mass: '55.845', category: 'transition', group: 8, period: 4, config: '[Ar] 3dâ¶ 4sÂ²', electronegativity: '1.83', radius: '156', melting: '1538', boiling: '2861', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'ä½¿ç”¨æœ€å¹¿æ³›çš„é‡‘å±ï¼Œè¡€çº¢è›‹ç™½çš„æˆåˆ†ã€‚' },
            { number: 27, symbol: 'Co', name: 'é’´', mass: '58.933', category: 'transition', group: 9, period: 4, config: '[Ar] 3dâ· 4sÂ²', electronegativity: '1.88', radius: '152', melting: '1495', boiling: '2927', discoverer: 'Georg Brandt', year: '1735', desc: 'ç”¨äºç£ä½“ã€ç”µæ± å’Œè“è‰²é¢œæ–™ã€‚' },
            { number: 28, symbol: 'Ni', name: 'é•', mass: '58.693', category: 'transition', group: 10, period: 4, config: '[Ar] 3dâ¸ 4sÂ²', electronegativity: '1.91', radius: '149', melting: '1455', boiling: '2913', discoverer: 'Axel Fredrik Cronstedt', year: '1751', desc: 'ç”¨äºä¸é”ˆé’¢ã€ç”µæ± å’Œç”µé•€ã€‚' },
            { number: 29, symbol: 'Cu', name: 'é“œ', mass: '63.546', category: 'transition', group: 11, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ¹', electronegativity: '1.90', radius: '145', melting: '1085', boiling: '2562', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'ä¼˜è‰¯çš„å¯¼ç”µä½“ï¼Œå¹¿æ³›ç”¨äºç”µçº¿ç”µç¼†ã€‚' },
            { number: 30, symbol: 'Zn', name: 'é”Œ', mass: '65.38', category: 'transition', group: 12, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ²', electronegativity: '1.65', radius: '142', melting: '419.5', boiling: '907', discoverer: 'Andreas Marggraf', year: '1746', desc: 'ç”¨äºé•€é”Œé˜²é”ˆå’Œç”µæ± ã€‚' },
            { number: 31, symbol: 'Ga', name: 'é•“', mass: '69.723', category: 'basic', group: 13, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ² 4pÂ¹', electronegativity: '1.81', radius: '136', melting: '29.76', boiling: '2204', discoverer: 'Lecoq de Boisbaudran', year: '1875', desc: 'ç†”ç‚¹ç•¥é«˜äºå®¤æ¸©çš„é‡‘å±ï¼Œç”¨äºåŠå¯¼ä½“ã€‚' },
            { number: 32, symbol: 'Ge', name: 'é”—', mass: '72.63', category: 'metalloid', group: 14, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ² 4pÂ²', electronegativity: '2.01', radius: '125', melting: '938.2', boiling: '2833', discoverer: 'Clemens Winkler', year: '1886', desc: 'æ—©æœŸæ™¶ä½“ç®¡ææ–™ï¼Œç”¨äºå…‰çº¤ã€‚' },
            { number: 33, symbol: 'As', name: 'ç ·', mass: '74.922', category: 'metalloid', group: 15, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ² 4pÂ³', electronegativity: '2.18', radius: '114', melting: '817', boiling: '614', discoverer: 'Albertus Magnus', year: '1250', desc: 'æœ‰æ¯’çš„ç±»é‡‘å±ï¼Œç”¨äºåŠå¯¼ä½“å’Œå†œè¯ã€‚' },
            { number: 34, symbol: 'Se', name: 'ç¡’', mass: '78.96', category: 'nonmetal', group: 16, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ² 4pâ´', electronegativity: '2.55', radius: '103', melting: '221', boiling: '685', discoverer: 'JÃ¶ns Jacob Berzelius', year: '1817', desc: 'ç”¨äºå…‰ç”µæ± å’Œå¤å°æœºã€‚' },
            { number: 35, symbol: 'Br', name: 'æº´', mass: '79.904', category: 'halogen', group: 17, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ² 4pâµ', electronegativity: '2.96', radius: '94', melting: '-7.3', boiling: '58.8', discoverer: 'Antoine JÃ©rÃ´me Balard', year: '1826', desc: 'å®¤æ¸©ä¸‹å”¯ä¸€çš„æ¶²æ€éé‡‘å±å…ƒç´ ã€‚' },
            { number: 36, symbol: 'Kr', name: 'æ°ª', mass: '83.798', category: 'noble', group: 18, period: 4, config: '[Ar] 3dÂ¹â° 4sÂ² 4pâ¶', electronegativity: '3.00', radius: '88', melting: '-157.4', boiling: '-153.2', discoverer: 'William Ramsay', year: '1898', desc: 'ç”¨äºé«˜å¼ºåº¦ç…§æ˜å’Œæ¿€å…‰ã€‚' },
            { number: 37, symbol: 'Rb', name: 'é“·', mass: '85.468', category: 'alkali', group: 1, period: 5, config: '[Kr] 5sÂ¹', electronegativity: '0.82', radius: '265', melting: '39.31', boiling: '688', discoverer: 'Robert Bunsen', year: '1861', desc: 'ç”¨äºåŸå­é’Ÿå’Œå…‰ç”µæ± ã€‚' },
            { number: 38, symbol: 'Sr', name: 'é”¶', mass: '87.62', category: 'alkaline', group: 2, period: 5, config: '[Kr] 5sÂ²', electronegativity: '0.95', radius: '219', melting: '777', boiling: '1377', discoverer: 'William Cruickshank', year: '1790', desc: 'ç”¨äºçº¢è‰²çƒŸèŠ±å’Œç£ææ–™ã€‚' },
            { number: 39, symbol: 'Y', name: 'é’‡', mass: '88.906', category: 'transition', group: 3, period: 5, config: '[Kr] 4dÂ¹ 5sÂ²', electronegativity: '1.22', radius: '212', melting: '1522', boiling: '3345', discoverer: 'Johan Gadolin', year: '1794', desc: 'ç”¨äºLEDå’Œé«˜æ¸©è¶…å¯¼ä½“ã€‚' },
            { number: 40, symbol: 'Zr', name: 'é”†', mass: '91.224', category: 'transition', group: 4, period: 5, config: '[Kr] 4dÂ² 5sÂ²', electronegativity: '1.33', radius: '206', melting: '1855', boiling: '4409', discoverer: 'Martin Heinrich Klaproth', year: '1789', desc: 'è€è…èš€é‡‘å±ï¼Œç”¨äºæ ¸ååº”å †ã€‚' },
            { number: 41, symbol: 'Nb', name: 'é“Œ', mass: '92.906', category: 'transition', group: 5, period: 5, config: '[Kr] 4dâ´ 5sÂ¹', electronegativity: '1.6', radius: '198', melting: '2477', boiling: '4744', discoverer: 'Charles Hatchett', year: '1801', desc: 'ç”¨äºè¶…å¯¼ç£ä½“å’Œåˆé‡‘é’¢ã€‚' },
            { number: 42, symbol: 'Mo', name: 'é’¼', mass: '95.95', category: 'transition', group: 6, period: 5, config: '[Kr] 4dâµ 5sÂ¹', electronegativity: '2.16', radius: '190', melting: '2623', boiling: '4639', discoverer: 'Carl Wilhelm Scheele', year: '1778', desc: 'é«˜ç†”ç‚¹é‡‘å±ï¼Œç”¨äºé«˜å¼ºåº¦é’¢ã€‚' },
            { number: 43, symbol: 'Tc', name: 'é”', mass: '[98]', category: 'transition', group: 7, period: 5, config: '[Kr] 4dâµ 5sÂ²', electronegativity: '1.9', radius: '183', melting: '2157', boiling: '4265', discoverer: 'Carlo Perrier', year: '1937', desc: 'ç¬¬ä¸€ä¸ªäººå·¥åˆæˆå…ƒç´ ï¼Œç”¨äºåŒ»å­¦æˆåƒã€‚' },
            { number: 44, symbol: 'Ru', name: 'é’Œ', mass: '101.07', category: 'transition', group: 8, period: 5, config: '[Kr] 4dâ· 5sÂ¹', electronegativity: '2.2', radius: '178', melting: '2334', boiling: '4150', discoverer: 'Karl Ernst Claus', year: '1844', desc: 'ç¨€æœ‰é‡‘å±ï¼Œç”¨äºç”µå­äº§å“å’Œå‚¬åŒ–å‰‚ã€‚' },
            { number: 45, symbol: 'Rh', name: 'é“‘', mass: '102.91', category: 'transition', group: 9, period: 5, config: '[Kr] 4dâ¸ 5sÂ¹', electronegativity: '2.28', radius: '173', melting: '1964', boiling: '3695', discoverer: 'William Hyde Wollaston', year: '1803', desc: 'ç”¨äºå‚¬åŒ–è½¬æ¢å™¨å’Œç å®é•€å±‚ã€‚' },
            { number: 46, symbol: 'Pd', name: 'é’¯', mass: '106.42', category: 'transition', group: 10, period: 5, config: '[Kr] 4dÂ¹â°', electronegativity: '2.20', radius: '169', melting: '1554.9', boiling: '2963', discoverer: 'William Hyde Wollaston', year: '1803', desc: 'å¸æ”¶æ°¢æ°”çš„èƒ½åŠ›æœ€å¼ºï¼Œç”¨äºå‚¬åŒ–è½¬æ¢å™¨ã€‚' },
            { number: 47, symbol: 'Ag', name: 'é“¶', mass: '107.87', category: 'transition', group: 11, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ¹', electronegativity: '1.93', radius: '165', melting: '961.8', boiling: '2162', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'å¯¼ç”µå¯¼çƒ­æ€§æœ€å¥½çš„é‡‘å±ï¼Œç”¨äºè´§å¸å’Œç å®ã€‚' },
            { number: 48, symbol: 'Cd', name: 'é•‰', mass: '112.41', category: 'transition', group: 12, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ²', electronegativity: '1.69', radius: '161', melting: '321.1', boiling: '767', discoverer: 'Karl Samuel Leberecht Hermann', year: '1817', desc: 'ç”¨äºç”µæ± å’Œé¢œæ–™ï¼Œæœ‰æ¯’ã€‚' },
            { number: 49, symbol: 'In', name: 'é“Ÿ', mass: '114.82', category: 'basic', group: 13, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ² 5pÂ¹', electronegativity: '1.78', radius: '156', melting: '156.6', boiling: '2072', discoverer: 'Ferdinand Reich', year: '1863', desc: 'ç”¨äºæ¶²æ™¶æ˜¾ç¤ºå±å’ŒåŠå¯¼ä½“ã€‚' },
            { number: 50, symbol: 'Sn', name: 'é”¡', mass: '118.71', category: 'basic', group: 14, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ² 5pÂ²', electronegativity: '1.96', radius: '145', melting: '231.9', boiling: '2602', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'ç”¨äºç„Šæ–™å’Œé•€å±‚ï¼Œé˜²æ­¢è…èš€ã€‚' },
            { number: 51, symbol: 'Sb', name: 'é”‘', mass: '121.76', category: 'metalloid', group: 15, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ² 5pÂ³', electronegativity: '2.05', radius: '133', melting: '630.6', boiling: '1587', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'ç”¨äºé˜»ç‡ƒå‰‚å’Œé“…åˆé‡‘ç¡¬åŒ–ã€‚' },
            { number: 52, symbol: 'Te', name: 'ç¢²', mass: '127.60', category: 'metalloid', group: 16, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ² 5pâ´', electronegativity: '2.1', radius: '123', melting: '449.5', boiling: '988', discoverer: 'Franz-Joseph MÃ¼ller von Reichenstein', year: '1782', desc: 'ç”¨äºå¤ªé˜³èƒ½ç”µæ± å’Œçƒ­ç”µè®¾å¤‡ã€‚' },
            { number: 53, symbol: 'I', name: 'ç¢˜', mass: '126.90', category: 'halogen', group: 17, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ² 5pâµ', electronegativity: '2.66', radius: '115', melting: '113.7', boiling: '184.3', discoverer: 'Bernard Courtois', year: '1811', desc: 'äººä½“å¿…éœ€çš„å¾®é‡å…ƒç´ ï¼Œç”¨äºæ¶ˆæ¯’ã€‚' },
            { number: 54, symbol: 'Xe', name: 'æ°™', mass: '131.29', category: 'noble', group: 18, period: 5, config: '[Kr] 4dÂ¹â° 5sÂ² 5pâ¶', electronegativity: '2.6', radius: '108', melting: '-111.8', boiling: '-108.0', discoverer: 'William Ramsay', year: '1898', desc: 'ç”¨äºé«˜å¼ºåº¦ç…§æ˜å’Œç¦»å­æ¨è¿›å™¨ã€‚' },
            { number: 55, symbol: 'Cs', name: 'é“¯', mass: '132.91', category: 'alkali', group: 1, period: 6, config: '[Xe] 6sÂ¹', electronegativity: '0.79', radius: '298', melting: '28.5', boiling: '671', discoverer: 'Robert Bunsen', year: '1860', desc: 'å®šä¹‰ç§’çš„åŸºå‡†ï¼Œç”¨äºåŸå­é’Ÿã€‚' },
            { number: 56, symbol: 'Ba', name: 'é’¡', mass: '137.33', category: 'alkaline', group: 2, period: 6, config: '[Xe] 6sÂ²', electronegativity: '0.89', radius: '253', melting: '727', boiling: '1845', discoverer: 'Humphry Davy', year: '1808', desc: 'ç”¨äºXå°„çº¿é€ å½±å’Œç»¿è‰²çƒŸèŠ±ã€‚' },
            { number: 57, symbol: 'La', name: 'é•§', mass: '138.91', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 5dÂ¹ 6sÂ²', electronegativity: '1.1', radius: '169', melting: '920', boiling: '3464', discoverer: 'Carl Gustaf Mosander', year: '1839', desc: 'é•§ç³»å…ƒç´ ç¬¬ä¸€ä¸ªï¼Œç”¨äºå…‰å­¦ç»ç’ƒã€‚' },
            { number: 58, symbol: 'Ce', name: 'é“ˆ', mass: '140.12', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹ 5dÂ¹ 6sÂ²', electronegativity: '1.12', radius: '167', melting: '798', boiling: '3360', discoverer: 'Martin Heinrich Klaproth', year: '1803', desc: 'æœ€ä¸°å¯Œçš„ç¨€åœŸå…ƒç´ ï¼Œç”¨äºæ‰“ç«çŸ³ã€‚' },
            { number: 59, symbol: 'Pr', name: 'é•¨', mass: '140.91', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ³ 6sÂ²', electronegativity: '1.13', radius: '165', melting: '931', boiling: '3290', discoverer: 'Carl Auer von Welsbach', year: '1885', desc: 'ç”¨äºé«˜å¼ºåº¦ç£é“å’Œé»„è‰²ç»ç’ƒé¢œæ–™ã€‚' },
            { number: 60, symbol: 'Nd', name: 'é’•', mass: '144.24', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fâ´ 6sÂ²', electronegativity: '1.14', radius: '164', melting: '1021', boiling: '3100', discoverer: 'Carl Auer von Welsbach', year: '1885', desc: 'ç”¨äºæœ€å¼ºæ°¸ç£ä½“ï¼ˆé’•ç£é“ï¼‰ã€‚' },
            { number: 61, symbol: 'Pm', name: 'é’·', mass: '[145]', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fâµ 6sÂ²', electronegativity: '1.13', radius: '163', melting: '1100', boiling: '3000', discoverer: 'Jacob A. Marinsky', year: '1945', desc: 'äººå·¥åˆæˆç¨€åœŸå…ƒç´ ï¼Œç”¨äºæ ¸ç”µæ± ã€‚' },
            { number: 62, symbol: 'Sm', name: 'é’', mass: '150.36', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fâ¶ 6sÂ²', electronegativity: '1.17', radius: '162', melting: '1072', boiling: '1803', discoverer: 'Lecoq de Boisbaudran', year: '1879', desc: 'ç”¨äºå¾®æ³¢æ»¤æ³¢å™¨å’Œæ ¸ååº”å †æ§åˆ¶æ£’ã€‚' },
            { number: 63, symbol: 'Eu', name: 'é“•', mass: '151.96', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fâ· 6sÂ²', electronegativity: '1.2', radius: '185', melting: '822', boiling: '1529', discoverer: 'EugÃ¨ne-Anatole DemarÃ§ay', year: '1896', desc: 'ç”¨äºè§å…‰ç¯å’Œé˜²ä¼ªæ ‡è®°ã€‚' },
            { number: 64, symbol: 'Gd', name: 'é’†', mass: '157.25', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fâ· 5dÂ¹ 6sÂ²', electronegativity: '1.2', radius: '161', melting: '1313', boiling: '3250', discoverer: 'Lecoq de Boisbaudran', year: '1880', desc: 'ç”¨äºMRIé€ å½±å‰‚å’Œæ ¸ååº”å †ã€‚' },
            { number: 65, symbol: 'Tb', name: 'é“½', mass: '158.93', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fâ¹ 6sÂ²', electronegativity: '1.2', radius: '159', melting: '1356', boiling: '3230', discoverer: 'Carl Gustaf Mosander', year: '1843', desc: 'ç”¨äºå›ºæ€å™¨ä»¶å’Œç‡ƒæ–™æ·»åŠ å‰‚ã€‚' },
            { number: 66, symbol: 'Dy', name: 'é•', mass: '162.50', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹â° 6sÂ²', electronegativity: '1.22', radius: '160', melting: '1412', boiling: '2567', discoverer: 'Lecoq de Boisbaudran', year: '1886', desc: 'ç”¨äºç¡¬ç›˜é©±åŠ¨å™¨å’Œæ¿€å…‰ææ–™ã€‚' },
            { number: 67, symbol: 'Ho', name: 'é’¬', mass: '164.93', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹Â¹ 6sÂ²', electronegativity: '1.23', radius: '158', melting: '1474', boiling: '2700', discoverer: 'Per Teodor Cleve', year: '1879', desc: 'å…·æœ‰æœ€é«˜ç£çŸ©çš„å…ƒç´ ï¼Œç”¨äºæ¿€å…‰ã€‚' },
            { number: 68, symbol: 'Er', name: 'é“’', mass: '167.26', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹Â² 6sÂ²', electronegativity: '1.24', radius: '156', melting: '1497', boiling: '2510', discoverer: 'Carl Gustaf Mosander', year: '1843', desc: 'ç”¨äºå…‰çº¤æ”¾å¤§å™¨å’Œç²‰çº¢è‰²ç»ç’ƒã€‚' },
            { number: 69, symbol: 'Tm', name: 'é“¥', mass: '168.93', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹Â³ 6sÂ²', electronegativity: '1.25', radius: '176', melting: '1545', boiling: '1950', discoverer: 'Per Teodor Cleve', year: '1879', desc: 'ç”¨äºæ¿€å…‰å’Œä¾¿æºå¼Xå°„çº¿è®¾å¤‡ã€‚' },
            { number: 70, symbol: 'Yb', name: 'é•±', mass: '173.05', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹â´ 6sÂ²', electronegativity: '1.1', radius: '174', melting: '819', boiling: '1196', discoverer: 'Jean Charles Galissard de Marignac', year: '1878', desc: 'ç”¨äºåŸå­é’Ÿå’Œä¸é”ˆé’¢æ·»åŠ å‰‚ã€‚' },
            { number: 71, symbol: 'Lu', name: 'é•¥', mass: '174.97', category: 'lanthanide', group: 3, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹ 6sÂ²', electronegativity: '1.27', radius: '173', melting: '1663', boiling: '3402', discoverer: 'Georges Urbain', year: '1907', desc: 'é•§ç³»æœ€åä¸€ä¸ªå…ƒç´ ï¼Œç”¨äºPETæ‰«æã€‚' },
            { number: 72, symbol: 'Hf', name: 'é“ª', mass: '178.49', category: 'transition', group: 4, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ² 6sÂ²', electronegativity: '1.3', radius: '159', melting: '2233', boiling: '4603', discoverer: 'Dirk Coster', year: '1923', desc: 'ç”¨äºæ ¸ååº”å †æ§åˆ¶æ£’ï¼Œä¸é”†å…±ç”Ÿã€‚' },
            { number: 73, symbol: 'Ta', name: 'é’½', mass: '180.95', category: 'transition', group: 5, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ³ 6sÂ²', electronegativity: '1.5', radius: '146', melting: '3017', boiling: '5458', discoverer: 'Anders Gustaf Ekeberg', year: '1802', desc: 'é«˜è€è…èš€æ€§ï¼Œç”¨äºç”µå­å…ƒä»¶ã€‚' },
            { number: 74, symbol: 'W', name: 'é’¨', mass: '183.84', category: 'transition', group: 6, period: 6, config: '[Xe] 4fÂ¹â´ 5dâ´ 6sÂ²', electronegativity: '2.36', radius: '139', melting: '3422', boiling: '5555', discoverer: 'Carl Wilhelm Scheele', year: '1781', desc: 'ç†”ç‚¹æœ€é«˜çš„é‡‘å±ï¼Œç”¨äºç¯ä¸ã€‚' },
            { number: 75, symbol: 'Re', name: 'é“¼', mass: '186.21', category: 'transition', group: 7, period: 6, config: '[Xe] 4fÂ¹â´ 5dâµ 6sÂ²', electronegativity: '1.9', radius: '137', melting: '3186', boiling: '5596', discoverer: 'Walter Noddack', year: '1925', desc: 'æœ€åä¸€ä¸ªè¢«å‘ç°çš„ç¨³å®šå…ƒç´ ï¼Œç”¨äºå‚¬åŒ–å‰‚ã€‚' },
            { number: 76, symbol: 'Os', name: 'é”‡', mass: '190.23', category: 'transition', group: 8, period: 6, config: '[Xe] 4fÂ¹â´ 5dâ¶ 6sÂ²', electronegativity: '2.2', radius: '135', melting: '3033', boiling: '5012', discoverer: 'Smithson Tennant', year: '1803', desc: 'å¯†åº¦æœ€å¤§çš„è‡ªç„¶å…ƒç´ ï¼Œç”¨äºç¡¬åŒ–åˆé‡‘ã€‚' },
            { number: 77, symbol: 'Ir', name: 'é“±', mass: '192.22', category: 'transition', group: 9, period: 6, config: '[Xe] 4fÂ¹â´ 5dâ· 6sÂ²', electronegativity: '2.20', radius: '136', melting: '2446', boiling: '4428', discoverer: 'Smithson Tennant', year: '1803', desc: 'ç¬¬äºŒå¯†é›†çš„é‡‘å±ï¼Œç”¨äºç«èŠ±å¡ã€‚' },
            { number: 78, symbol: 'Pt', name: 'é“‚', mass: '195.08', category: 'transition', group: 10, period: 6, config: '[Xe] 4fÂ¹â´ 5dâ¹ 6sÂ¹', electronegativity: '2.28', radius: '139', melting: '1768.3', boiling: '3825', discoverer: 'Julius Scaliger', year: '1735', desc: 'è´µé‡‘å±ï¼Œç”¨äºå‚¬åŒ–è½¬æ¢å™¨å’Œç å®ã€‚' },
            { number: 79, symbol: 'Au', name: 'é‡‘', mass: '196.97', category: 'transition', group: 11, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ¹', electronegativity: '2.54', radius: '144', melting: '1064.2', boiling: '2856', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'æœ€å…·å»¶å±•æ€§çš„é‡‘å±ï¼Œè´§å¸å’Œç å®é¦–é€‰ã€‚' },
            { number: 80, symbol: 'Hg', name: 'æ±', mass: '200.59', category: 'transition', group: 12, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ²', electronegativity: '2.00', radius: '157', melting: '-38.83', boiling: '356.7', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'å®¤æ¸©ä¸‹å”¯ä¸€çš„æ¶²æ€é‡‘å±ï¼Œç”¨äºæ¸©åº¦è®¡ã€‚' },
            { number: 81, symbol: 'Tl', name: 'é“Š', mass: '204.38', category: 'basic', group: 13, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ² 6pÂ¹', electronegativity: '1.62', radius: '170', melting: '304', boiling: '1473', discoverer: 'William Crookes', year: '1861', desc: 'æœ‰æ¯’é‡‘å±ï¼Œæ›¾ç”¨äºé¼ è¯ã€‚' },
            { number: 82, symbol: 'Pb', name: 'é“…', mass: '207.2', category: 'basic', group: 14, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ² 6pÂ²', electronegativity: '1.87', radius: '175', melting: '327.5', boiling: '1749', discoverer: 'å²å‰å·²çŸ¥', year: '-', desc: 'é‡é‡‘å±ï¼Œç”¨äºç”µæ± å’Œè¾å°„é˜²æŠ¤ã€‚' },
            { number: 83, symbol: 'Bi', name: 'é“‹', mass: '208.98', category: 'basic', group: 15, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ² 6pÂ³', electronegativity: '2.02', radius: '170', melting: '271.4', boiling: '1564', discoverer: 'Claude FranÃ§ois Geoffroy', year: '1753', desc: 'æŠ—ç£æ€§æœ€å¼ºçš„é‡‘å±ï¼Œç”¨äºåŒ–å¦†å“å’Œè¯ç‰©ã€‚' },
            { number: 84, symbol: 'Po', name: 'é’‹', mass: '[209]', category: 'metalloid', group: 16, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ² 6pâ´', electronegativity: '2.0', radius: '168', melting: '254', boiling: '962', discoverer: 'Marie Curie', year: '1898', desc: 'å±…é‡Œå¤«äººå‘ç°çš„ç¬¬ä¸€ç§å…ƒç´ ï¼Œå¼ºæ”¾å°„æ€§ã€‚' },
            { number: 85, symbol: 'At', name: 'ç ¹', mass: '[210]', category: 'halogen', group: 17, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ² 6pâµ', electronegativity: '2.2', radius: '140', melting: '302', boiling: '337', discoverer: 'Dale R. Corson', year: '1940', desc: 'æç¨€æœ‰æ”¾å°„æ€§å…ƒç´ ï¼ŒåŠè¡°æœŸæçŸ­ã€‚' },
            { number: 86, symbol: 'Rn', name: 'æ°¡', mass: '[222]', category: 'noble', group: 18, period: 6, config: '[Xe] 4fÂ¹â´ 5dÂ¹â° 6sÂ² 6pâ¶', electronegativity: '2.2', radius: '134', melting: '-71', boiling: '-61.7', discoverer: 'Friedrich Ernst Dorn', year: '1900', desc: 'æ”¾å°„æ€§æ°”ä½“ï¼Œå®¤å†…ç©ºæ°”æ±¡æŸ“æºä¹‹ä¸€ã€‚' },
            { number: 87, symbol: 'Fr', name: 'é’«', mass: '[223]', category: 'alkali', group: 1, period: 7, config: '[Rn] 7sÂ¹', electronegativity: '0.7', radius: '348', melting: '27', boiling: '677', discoverer: 'Marguerite Perey', year: '1939', desc: 'æä¸ç¨³å®šçš„æ”¾å°„æ€§ç¢±é‡‘å±ã€‚' },
            { number: 88, symbol: 'Ra', name: 'é•­', mass: '[226]', category: 'alkaline', group: 2, period: 7, config: '[Rn] 7sÂ²', electronegativity: '0.9', radius: '283', melting: '700', boiling: '1737', discoverer: 'Pierre and Marie Curie', year: '1898', desc: 'å¼ºæ”¾å°„æ€§ï¼Œæ›¾ç”¨äºå‘å…‰æ¶‚æ–™ã€‚' },
            { number: 89, symbol: 'Ac', name: 'é”•', mass: '[227]', category: 'actinide', group: 3, period: 7, config: '[Rn] 6dÂ¹ 7sÂ²', electronegativity: '1.1', radius: '260', melting: '1050', boiling: '3198', discoverer: 'Friedrich O. Giesel', year: '1902', desc: 'é”•ç³»ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¼ºæ”¾å°„æ€§ã€‚' },
            { number: 90, symbol: 'Th', name: 'é’', mass: '232.04', category: 'actinide', group: 3, period: 7, config: '[Rn] 6dÂ² 7sÂ²', electronegativity: '1.3', radius: '237', melting: '1750', boiling: '4820', discoverer: 'JÃ¶ns Jacob Berzelius', year: '1828', desc: 'æ½œåœ¨çš„æ ¸èƒ½ç‡ƒæ–™ï¼Œå‚¨é‡ä¸°å¯Œã€‚' },
            { number: 91, symbol: 'Pa', name: 'é•¤', mass: '231.04', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ² 6dÂ¹ 7sÂ²', electronegativity: '1.5', radius: '243', melting: '1572', boiling: '4000', discoverer: 'William Crookes', year: '1913', desc: 'ç¨€æœ‰çš„é”•ç³»å…ƒç´ ï¼Œç”¨äºç§‘å­¦ç ”ç©¶ã€‚' },
            { number: 92, symbol: 'U', name: 'é“€', mass: '238.03', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ³ 6dÂ¹ 7sÂ²', electronegativity: '1.38', radius: '240', melting: '1135', boiling: '4131', discoverer: 'Martin Heinrich Klaproth', year: '1789', desc: 'ä¸»è¦æ ¸èƒ½ç‡ƒæ–™ï¼Œç”¨äºæ ¸ç”µç«™å’Œæ ¸æ­¦å™¨ã€‚' },
            { number: 93, symbol: 'Np', name: 'é•', mass: '[237]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fâ´ 6dÂ¹ 7sÂ²', electronegativity: '1.36', radius: '221', melting: '644', boiling: '4000', discoverer: 'Edwin McMillan', year: '1940', desc: 'ç¬¬ä¸€ä¸ªäººå·¥åˆæˆçš„è¶…é“€å…ƒç´ ã€‚' },
            { number: 94, symbol: 'Pu', name: 'é’š', mass: '[244]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fâ¶ 7sÂ²', electronegativity: '1.28', radius: '243', melting: '640', boiling: '3228', discoverer: 'Glenn T. Seaborg', year: '1940', desc: 'ç”¨äºæ ¸æ­¦å™¨å’Œæ ¸ç”µæ± ï¼ˆå¦‚æ—…è¡Œè€…å·ï¼‰ã€‚' },
            { number: 95, symbol: 'Am', name: 'é•…', mass: '[243]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fâ· 7sÂ²', electronegativity: '1.3', radius: '244', melting: '1176', boiling: '2607', discoverer: 'Glenn T. Seaborg', year: '1944', desc: 'ç”¨äºçƒŸé›¾æ¢æµ‹å™¨å’Œä»ªè¡¨ã€‚' },
            { number: 96, symbol: 'Cm', name: 'é””', mass: '[247]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fâ· 6dÂ¹ 7sÂ²', electronegativity: '1.3', radius: '245', melting: '1345', boiling: '3110', discoverer: 'Glenn T. Seaborg', year: '1944', desc: 'ä»¥å±…é‡Œå¤«å¦‡å‘½åï¼Œç”¨äºæ·±ç©ºæ¢æµ‹å™¨ç”µæºã€‚' },
            { number: 97, symbol: 'Bk', name: 'é”«', mass: '[247]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fâ¹ 7sÂ²', electronegativity: '1.3', radius: '244', melting: '1050', boiling: '2627', discoverer: 'Stanley G. Thompson', year: '1949', desc: 'ä»¥ä¼¯å…‹åˆ©å‘½åï¼Œç”¨äºåˆæˆæ›´é‡å…ƒç´ ã€‚' },
            { number: 98, symbol: 'Cf', name: 'é”', mass: '[251]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ¹â° 7sÂ²', electronegativity: '1.3', radius: '245', melting: '900', boiling: '1470', discoverer: 'Stanley G. Thompson', year: '1950', desc: 'ç”¨äºä¸­å­æºï¼Œæ²»ç–—ç™Œç—‡ã€‚' },
            { number: 99, symbol: 'Es', name: 'é”¿', mass: '[252]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ¹Â¹ 7sÂ²', electronegativity: '1.3', radius: '245', melting: '860', boiling: '996', discoverer: 'Albert Ghiorso', year: '1952', desc: 'ä»¥çˆ±å› æ–¯å¦å‘½åï¼Œç”¨äºç ”ç©¶ã€‚' },
            { number: 100, symbol: 'Fm', name: 'é•„', mass: '[257]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ¹Â² 7sÂ²', electronegativity: '1.3', radius: '245', melting: '1527', boiling: '-', discoverer: 'Albert Ghiorso', year: '1952', desc: 'ä»¥è´¹ç±³å‘½åï¼Œåªèƒ½åœ¨ç²’å­åŠ é€Ÿå™¨ä¸­åˆ¶å¤‡ã€‚' },
            { number: 101, symbol: 'Md', name: 'é’”', mass: '[258]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ¹Â³ 7sÂ²', electronegativity: '1.3', radius: '246', melting: '827', boiling: '-', discoverer: 'Albert Ghiorso', year: '1955', desc: 'ä»¥é—¨æ·åˆ—å¤«å‘½åï¼Œç¬¬ä¸€ä¸ªä»¥äººåå‘½åçš„å…ƒç´ ã€‚' },
            { number: 102, symbol: 'No', name: 'é”˜', mass: '[259]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ¹â´ 7sÂ²', electronegativity: '1.3', radius: '246', melting: '827', boiling: '-', discoverer: 'Albert Ghiorso', year: '1958', desc: 'ä»¥é˜¿å°”å¼—é›·å¾·Â·è¯ºè´å°”å‘½åã€‚' },
            { number: 103, symbol: 'Lr', name: 'é“¹', mass: '[262]', category: 'actinide', group: 3, period: 7, config: '[Rn] 5fÂ¹â´ 7sÂ² 7pÂ¹', electronegativity: '1.3', radius: '246', melting: '1627', boiling: '-', discoverer: 'Albert Ghiorso', year: '1961', desc: 'ä»¥åŠ³ä¼¦æ–¯å‘½åï¼Œé”•ç³»æœ€åä¸€ä¸ªå…ƒç´ ã€‚' },
            { number: 104, symbol: 'Rf', name: 'ğ¬¬»', mass: '[267]', category: 'transition', group: 4, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ² 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '1964', desc: 'è¶…é‡å…ƒç´ ï¼ŒåŠè¡°æœŸçº¦13å°æ—¶ã€‚' },
            { number: 105, symbol: 'Db', name: 'ğ¬­Š', mass: '[268]', category: 'transition', group: 5, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ³ 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '1967', desc: 'ä»¥æœå¸ƒçº³å‘½åï¼Œæä¸ç¨³å®šã€‚' },
            { number: 106, symbol: 'Sg', name: 'ğ¬­³', mass: '[269]', category: 'transition', group: 6, period: 7, config: '[Rn] 5fÂ¹â´ 6dâ´ 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Lawrence Berkeley National Laboratory', year: '1974', desc: 'ä»¥è¥¿åšæ ¼å‘½åï¼ŒåŠè¡°æœŸæ•°ç§’ã€‚' },
            { number: 107, symbol: 'Bh', name: 'ğ¬­›', mass: '[270]', category: 'transition', group: 7, period: 7, config: '[Rn] 5fÂ¹â´ 6dâµ 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Gesellschaft fÃ¼r Schwerionenforschung', year: '1981', desc: 'ä»¥ç»å°”å‘½åï¼Œæä¸ç¨³å®šã€‚' },
            { number: 108, symbol: 'Hs', name: 'ğ¬­¶', mass: '[269]', category: 'transition', group: 8, period: 7, config: '[Rn] 5fÂ¹â´ 6dâ¶ 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Gesellschaft fÃ¼r Schwerionenforschung', year: '1984', desc: 'ä»¥é»‘æ£®å·å‘½åï¼ŒåŠè¡°æœŸçº¦10ç§’ã€‚' },
            { number: 109, symbol: 'Mt', name: 'ä¥‘', mass: '[278]', category: 'transition', group: 9, period: 7, config: '[Rn] 5fÂ¹â´ 6dâ· 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Gesellschaft fÃ¼r Schwerionenforschung', year: '1982', desc: 'ä»¥è¿ˆç‰¹çº³å‘½åã€‚' },
            { number: 110, symbol: 'Ds', name: 'ğ«Ÿ¼', mass: '[281]', category: 'transition', group: 10, period: 7, config: '[Rn] 5fÂ¹â´ 6dâ¹ 7sÂ¹', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Gesellschaft fÃ¼r Schwerionenforschung', year: '1994', desc: 'ä»¥è¾¾å§†æ–½å¡”ç‰¹å‘½åã€‚' },
            { number: 111, symbol: 'Rg', name: 'ğ¬¬­', mass: '[282]', category: 'transition', group: 11, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ¹', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Gesellschaft fÃ¼r Schwerionenforschung', year: '1994', desc: 'ä»¥ä¼¦ç´å‘½åã€‚' },
            { number: 112, symbol: 'Cn', name: 'é¿”', mass: '[285]', category: 'transition', group: 12, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Gesellschaft fÃ¼r Schwerionenforschung', year: '1996', desc: 'ä»¥å“¥ç™½å°¼å‘½åã€‚' },
            { number: 113, symbol: 'Nh', name: 'é¿­', mass: '[286]', category: 'basic', group: 13, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ² 7pÂ¹', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'RIKEN', year: '2004', desc: 'ä»¥æ—¥æœ¬ï¼ˆNihonï¼‰å‘½åã€‚' },
            { number: 114, symbol: 'Fl', name: 'ğ«“§', mass: '[289]', category: 'basic', group: 14, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ² 7pÂ²', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '1999', desc: 'ä»¥è´¹ç±³å®éªŒå®¤å‘½åã€‚' },
            { number: 115, symbol: 'Mc', name: 'é•†', mass: '[290]', category: 'basic', group: 15, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ² 7pÂ³', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '2003', desc: 'ä»¥è«æ–¯ç§‘å·å‘½åã€‚' },
            { number: 116, symbol: 'Lv', name: 'ğ«Ÿ·', mass: '[293]', category: 'basic', group: 16, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ² 7pâ´', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '2000', desc: 'ä»¥åŠ³ä¼¦æ–¯åˆ©å¼—è«å°”å‘½åã€‚' },
            { number: 117, symbol: 'Ts', name: 'é¿¬', mass: '[294]', category: 'halogen', group: 17, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ² 7pâµ', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '2010', desc: 'ä»¥ç”°çº³è¥¿å·å‘½åã€‚' },
            { number: 118, symbol: 'Og', name: 'é¿«', mass: '[294]', category: 'noble', group: 18, period: 7, config: '[Rn] 5fÂ¹â´ 6dÂ¹â° 7sÂ² 7pâ¶', electronegativity: '-', radius: '-', melting: '-', boiling: '-', discoverer: 'Joint Institute for Nuclear Research', year: '2002', desc: 'ä»¥å¥¥åŠ æ¶…ç›¸å‘½åï¼Œç›®å‰æœ€é‡å…ƒç´ ã€‚' }
        ];

        let currentElement = null;
        let currentAtomAnimation = null;
        let currentTypewriter = null;
        let resizeManager = null;
        
        // èŠå¤©è®°å½•æ•°ç»„ï¼Œç”¨äºç»´æŠ¤å¯¹è¯ä¸Šä¸‹æ–‡
        let chatHistory = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            renderPeriodicTable();
            loadSettings();
            updateHistoryCount();
            
            // åˆå§‹åŒ–æ‹–åŠ¨è°ƒæ•´å®½åº¦åŠŸèƒ½
            resizeManager = new ResizeManager();
            resizeManager.restoreWidth();
        });

        // æ›´æ–°å†å²è®°å½•è®¡æ•°æ˜¾ç¤º
        function updateHistoryCount() {
            const count = Math.floor(chatHistory.length / 2); // æ¯è½®åŒ…å«userå’Œassistantä¸¤æ¡
            document.getElementById('historyCount').textContent = `å½“å‰å¯¹è¯ï¼š${count} è½®`;
            
            // å¦‚æœè®°å½•è¿‡å¤šï¼Œæ˜¾ç¤ºæç¤º
            if (count >= 10) {
                document.getElementById('historyCount').innerHTML += ' <span class="text-yellow-500">(æ¥è¿‘ä¸Šé™)</span>';
            }
        }

        // æ¸…ç©ºèŠå¤©è®°å½•
        function clearChatHistory() {
            if (chatHistory.length === 0) return;
            
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰èŠå¤©è®°å½•å—ï¼Ÿè¿™å°†é‡æ–°å¼€å§‹å¯¹è¯ã€‚')) {
                chatHistory = [];
                const container = document.getElementById('chatMessages');
                container.innerHTML = `
                    <div class="flex gap-3 animate-fade-in">
                        <div class="w-8 h-8 rounded-full bg-slate-800 border border-gray-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-md">
                            ğŸ§ 
                        </div>
                        <div class="chat-message bg-gray-700/50 rounded-2xl rounded-tl-none p-4 text-sm markdown-content">
                            <p>èŠå¤©è®°å½•å·²æ¸…ç©ºã€‚æˆ‘æ˜¯KimiåŒ–å­¦åŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®ä½ çš„å—ï¼Ÿ</p>
                        </div>
                    </div>
                `;
                updateHistoryCount();
                showToast('èŠå¤©è®°å½•å·²æ¸…ç©º');
            }
        }

        // è·å–å¸¦ä¸Šä¸‹æ–‡çš„messagesæ•°ç»„
        function getContextMessages(currentMessage) {
            const messages = [
                {
                    role: 'system',
                    content: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åŒ–å­¦åŠ©æ‰‹ã€‚å›ç­”æ—¶è¯·ä½¿ç”¨Markdownæ ¼å¼ï¼šç”¨##æˆ–###åˆ†æ®µè½ï¼Œç”¨**ç²—ä½“**æ ‡å‡ºé‡ç‚¹ï¼Œç”¨-åˆ—å‡ºè¦ç‚¹ï¼Œç”¨è¡¨æ ¼å¯¹æ¯”æ•°æ®ã€‚ç¡®ä¿æ’ç‰ˆæ¸…æ™°ã€å±‚æ¬¡åˆ†æ˜ï¼Œä¸è¦å †ç§¯å¤§æ®µæ–‡å­—ã€‚'
                }
            ];
            
            // æ·»åŠ å†å²è®°å½•ï¼Œæœ€å¤šä¿ç•™æœ€è¿‘10è½®å¯¹è¯ï¼ˆ20æ¡æ¶ˆæ¯ï¼‰é¿å…tokenè¶…é™
            const maxHistory = 20;
            let historyToInclude = chatHistory;
            if (chatHistory.length > maxHistory) {
                historyToInclude = chatHistory.slice(-maxHistory);
            }
            
            messages.push(...historyToInclude);
            
            // æ·»åŠ å½“å‰æ¶ˆæ¯
            messages.push({
                role: 'user',
                content: currentMessage
            });
            
            return messages;
        }

        // æ¸²æŸ“å‘¨æœŸè¡¨
        function renderPeriodicTable() {
            const grid = document.getElementById('periodicTable');
            grid.innerHTML = '';
            
            for (let period = 1; period <= 7; period++) {
                for (let group = 1; group <= 18; group++) {
                    if ((period === 6 || period === 7) && group === 3) {
                        const placeholder = document.createElement('div');
                        const btn = document.createElement('button');
                        btn.className = `w-full h-full rounded-lg border-2 border-dashed border-gray-600 hover:border-orange-500 hover:bg-orange-500/10 transition-all flex items-center justify-center text-xs text-gray-400 hover:text-orange-400 ${period === 6 ? 'category-lanthanide' : 'category-actinide'}`;
                        btn.style.opacity = '0.5';
                        btn.innerHTML = period === 6 ? '57-71<br>é•§ç³»' : '89-103<br>é”•ç³»';
                        btn.onclick = () => scrollToSeries(period === 6 ? 'lanthanide' : 'actinide');
                        placeholder.appendChild(btn);
                        grid.appendChild(placeholder);
                        continue;
                    }
                    
                    const element = elements.find(e => e.period === period && e.group === group);
                    
                    if (element) {
                        const elDiv = createElementCard(element);
                        grid.appendChild(elDiv);
                    } else {
                        const empty = document.createElement('div');
                        grid.appendChild(empty);
                    }
                }
            }
            
            const separator = document.createElement('div');
            separator.className = 'col-span-18 h-4';
            grid.appendChild(separator);
            
            const lanthanides = elements.filter(e => e.category === 'lanthanide');
            const actinides = elements.filter(e => e.category === 'actinide');
            
            lanthanides.forEach(el => {
                grid.appendChild(createElementCard(el, true));
            });
            
            actinides.forEach(el => {
                grid.appendChild(createElementCard(el, true));
            });
        }

        function createElementCard(element, isSeries = false) {
            const div = document.createElement('div');
            div.className = `element-card relative p-2 rounded-lg cursor-pointer border border-gray-600/30 category-${element.category} ${isSeries ? 'col-span-1' : ''}`;
            div.style.aspectRatio = '1';
            div.dataset.category = element.category;
            div.dataset.symbol = element.symbol;
            div.dataset.name = element.name;
            div.dataset.number = element.number;
            div.onclick = () => showDetail(element);
            
            div.innerHTML = `
                <div class="absolute top-1 left-1 text-[10px] opacity-70">${element.number}</div>
                <div class="absolute top-1 right-1 text-[8px] opacity-50">${element.mass}</div>
                <div class="h-full flex flex-col items-center justify-center">
                    <div class="text-2xl font-bold">${element.symbol}</div>
                    <div class="text-[10px] mt-1 opacity-90 truncate w-full text-center">${element.name}</div>
                </div>
            `;
            
            return div;
        }

        function scrollToSeries(series) {
            const element = document.querySelector(`.category-${series}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                element.style.animation = 'pulse 1s 3';
                setTimeout(() => {
                    element.style.animation = '';
                }, 3000);
            }
        }

        // è®¡ç®—ç”µå­å±‚åˆ†å¸ƒ
        function getElectronShells(atomicNumber) {
            const shells = [];
            const maxElectrons = [2, 8, 18, 32, 32, 18, 8];
            let remaining = atomicNumber;
            
            for (let i = 0; i < maxElectrons.length && remaining > 0; i++) {
                const electrons = Math.min(remaining, maxElectrons[i]);
                shells.push({
                    layer: i + 1,
                    electrons: electrons,
                    radius: 35 + i * 22,
                    color: `hsl(${20 + i * 25}, 85%, 60%)`
                });
                remaining -= electrons;
            }
            
            return shells;
        }

        // ç”µå­äº‘æ¨¡å¼åŠ¨ç”»ç±»
        class AtomCloudAnimator {
            constructor(canvasId, atomicNumber) {
                this.canvas = document.getElementById(canvasId);
                this.ctx = this.canvas.getContext('2d');
                this.atomicNumber = atomicNumber;
                this.shells = getElectronShells(atomicNumber);
                this.electrons = [];
                this.animationId = null;
                this.centerX = this.canvas.width / 2;
                this.centerY = this.canvas.height / 2;
                
                this.initElectrons();
                this.resize();
                window.addEventListener('resize', () => this.resize());
            }
            
            resize() {
                const rect = this.canvas.parentElement.getBoundingClientRect();
                this.canvas.width = rect.width;
                this.canvas.height = rect.height;
                this.centerX = this.canvas.width / 2;
                this.centerY = this.canvas.height / 2;
            }
            
            initElectrons() {
                this.shells.forEach((shell, shellIndex) => {
                    for (let i = 0; i < shell.electrons; i++) {
                        this.electrons.push({
                            shellIndex: shellIndex,
                            angle: (Math.PI * 2 * i) / shell.electrons,
                            speed: (0.02 - shellIndex * 0.002) * (Math.random() > 0.5 ? 1 : -1),
                            radius: shell.radius,
                            color: shell.color,
                            trail: []
                        });
                    }
                });
            }
            
            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                const nucleusGradient = this.ctx.createRadialGradient(
                    this.centerX, this.centerY, 0,
                    this.centerX, this.centerY, 15
                );
                nucleusGradient.addColorStop(0, '#ff6b6b');
                nucleusGradient.addColorStop(0.5, '#ee5a24');
                nucleusGradient.addColorStop(1, 'rgba(238, 90, 36, 0)');
                
                this.ctx.beginPath();
                this.ctx.arc(this.centerX, this.centerY, 12, 0, Math.PI * 2);
                this.ctx.fillStyle = nucleusGradient;
                this.ctx.fill();
                
                this.ctx.fillStyle = '#fff';
                this.ctx.font = 'bold 10px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.textBaseline = 'middle';
                this.ctx.fillText(this.atomicNumber, this.centerX, this.centerY);
                
                this.shells.forEach(shell => {
                    this.ctx.beginPath();
                    this.ctx.arc(this.centerX, this.centerY, shell.radius, 0, Math.PI * 2);
                    this.ctx.strokeStyle = shell.color + '50';
                    this.ctx.lineWidth = 1.5;
                    this.ctx.setLineDash([5, 5]);
                    this.ctx.stroke();
                    this.ctx.setLineDash([]);
                });
                
                this.electrons.forEach(electron => {
                    electron.angle += electron.speed;
                    
                    const x = this.centerX + Math.cos(electron.angle) * electron.radius;
                    const y = this.centerY + Math.sin(electron.angle) * electron.radius * 0.6;
                    
                    electron.trail.push({x, y});
                    if (electron.trail.length > 10) electron.trail.shift();
                    
                    if (electron.trail.length > 1) {
                        this.ctx.beginPath();
                        this.ctx.moveTo(electron.trail[0].x, electron.trail[0].y);
                        for (let i = 1; i < electron.trail.length; i++) {
                            this.ctx.lineTo(electron.trail[i].x, electron.trail[i].y);
                        }
                        this.ctx.strokeStyle = electron.color + '30';
                        this.ctx.lineWidth = 2;
                        this.ctx.stroke();
                    }
                    
                    const glowGradient = this.ctx.createRadialGradient(x, y, 0, x, y, 8);
                    glowGradient.addColorStop(0, electron.color);
                    glowGradient.addColorStop(0.5, electron.color + '80');
                    glowGradient.addColorStop(1, 'transparent');
                    
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, 8, 0, Math.PI * 2);
                    this.ctx.fillStyle = glowGradient;
                    this.ctx.fill();
                    
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, 3, 0, Math.PI * 2);
                    this.ctx.fillStyle = '#fff';
                    this.ctx.fill();
                });
                
                this.animationId = requestAnimationFrame(() => this.draw());
            }
            
            start() {
                this.draw();
            }
            
            stop() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                }
            }
        }

        // æ˜¾ç¤ºè¯¦æƒ…
        function showDetail(element) {
            currentElement = element;
            
            if (currentAtomAnimation) {
                currentAtomAnimation.stop();
            }
            
            const panel = document.getElementById('detailPanel');
            const content = document.getElementById('detailContent');
            
            document.getElementById('detailName').textContent = element.name;
            document.getElementById('detailSymbol').textContent = element.symbol;
            
            content.innerHTML = `
                <div class="grid grid-cols-2 gap-4">
                    <div class="glass-panel p-4 rounded-xl border-l-4 border-orange-500">
                        <h4 class="text-sm text-gray-400 mb-1">åŸå­åºæ•°</h4>
                        <p class="text-2xl font-bold text-orange-400">${element.number}</p>
                    </div>
                    <div class="glass-panel p-4 rounded-xl border-l-4 border-red-500">
                        <h4 class="text-sm text-gray-400 mb-1">åŸå­é‡</h4>
                        <p class="text-2xl font-bold text-red-400">${element.mass} u</p>
                    </div>
                </div>
                
                <div class="glass-panel p-4 rounded-xl space-y-3 border border-gray-700">
                    <h4 class="font-semibold text-lg border-b border-gray-700 pb-2 text-orange-400">ç‰©ç†æ€§è´¨</h4>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-400">ç”µå­æ„å‹ï¼š</span>
                            <span class="font-mono text-orange-400">${element.config}</span>
                        </div>
                        <div>
                            <span class="text-gray-400">ç”µè´Ÿæ€§ï¼š</span>
                            <span class="text-red-400">${element.electronegativity || 'N/A'}</span>
                        </div>
                        <div>
                            <span class="text-gray-400">åŸå­åŠå¾„ï¼š</span>
                            <span>${element.radius || 'N/A'} pm</span>
                        </div>
                        <div>
                            <span class="text-gray-400">ç†”ç‚¹ï¼š</span>
                            <span>${element.melting}Â°C</span>
                        </div>
                        <div>
                            <span class="text-gray-400">æ²¸ç‚¹ï¼š</span>
                            <span>${element.boiling}Â°C</span>
                        </div>
                    </div>
                </div>
                
                <div class="glass-panel p-4 rounded-xl border border-gray-700">
                    <h4 class="font-semibold text-lg border-b border-gray-700 pb-2 mb-3 text-orange-400">å†å²ä¿¡æ¯</h4>
                    <div class="space-y-2 text-sm">
                        <p><span class="text-gray-400">å‘ç°è€…ï¼š</span>${element.discoverer}</p>
                        <p><span class="text-gray-400">å‘ç°å¹´ä»½ï¼š</span>${element.year}</p>
                        <p class="mt-3 text-gray-300 leading-relaxed">${element.desc}</p>
                    </div>
                </div>
                
                <div class="glass-panel p-4 rounded-xl border border-gray-700">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="font-semibold text-lg text-orange-400 flex items-center gap-2">
                            <span class="w-2 h-2 bg-orange-400 rounded-full animate-pulse"></span>
                            æ ¸å¤–ç”µå­äº‘æ¨¡æ‹Ÿ
                        </h4>
                    </div>
                    <div class="atom-container">
                        <canvas id="atomCanvas" class="atom-canvas"></canvas>
                        <div class="electron-legend">
                            <div class="flex flex-col gap-1">
                                ${getElectronShells(element.number).map((shell, i) => `
                                    <div class="flex items-center gap-2">
                                        <span class="w-2 h-2 rounded-full" style="background: ${shell.color}; box-shadow: 0 0 4px ${shell.color}"></span>
                                        <span>ç¬¬${shell.layer}å±‚ (${['K','L','M','N','O','P','Q'][i]})</span>
                                        <span class="text-orange-400 font-mono">${shell.electrons}eâ»</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    <p class="text-center text-xs text-gray-500 mt-2">
                        åŸºäºé‡å­åŠ›å­¦çš„æ¦‚ç‡äº‘æ¼”ç¤º Â· å„å±‚è½¨é“é¢œè‰²ä¸ç”µå­é¢œè‰²å¯¹åº”
                    </p>
                </div>
                
                <button onclick="askAIAboutElement()" class="w-full py-3 bg-gradient-to-r from-orange-600 to-red-600 rounded-xl font-semibold hover:from-orange-500 hover:to-red-500 transition-all flex items-center justify-center gap-2 shadow-lg hover:shadow-orange-500/25 text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                    è¯¢é—®Kimiå…³äºæ­¤å…ƒç´ 
                </button>
            `;
            
            panel.classList.remove('translate-x-full');
            
            setTimeout(() => {
                currentAtomAnimation = new AtomCloudAnimator('atomCanvas', element.number);
                currentAtomAnimation.start();
            }, 100);
        }

        function closeDetail() {
            if (currentAtomAnimation) {
                currentAtomAnimation.stop();
                currentAtomAnimation = null;
            }
            document.getElementById('detailPanel').classList.add('translate-x-full');
            currentElement = null;
        }

        // AIèŠå¤©åŠŸèƒ½
        function toggleAIChat() {
            const chat = document.getElementById('aiChat');
            chat.classList.toggle('translate-x-full');
        }

        function askAIAboutElement() {
            if (!currentElement) return;
            toggleAIChat();
            const input = document.getElementById('chatInput');
            input.value = `è¯·è¯¦ç»†ä»‹ç»ä¸€ä¸‹${currentElement.name}ï¼ˆ${currentElement.symbol}ï¼‰çš„åŒ–å­¦æ€§è´¨ã€ä¸»è¦åº”ç”¨å’ŒåŒä½ç´ æƒ…å†µã€‚`;
        }

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;
            
            const apiKey = localStorage.getItem('moonshotApiKey') || document.getElementById('moonshotApiKey').value;
            if (!apiKey) {
                alert('è¯·å…ˆè®¾ç½®Moonshot API Key');
                toggleSettings();
                return;
            }
            
            // å¦‚æœæœ‰æ­£åœ¨è¿›è¡Œçš„æ‰“å­—ï¼Œå…ˆåœæ­¢
            if (currentTypewriter) {
                currentTypewriter.skip();
                currentTypewriter = null;
            }
            
            // å…ˆå°†ç”¨æˆ·æ¶ˆæ¯æ·»åŠ åˆ°ç•Œé¢
            addMessage(message, 'user');
            input.value = '';
            
            const loadingId = addLoadingMessage();
            
            try {
                const model = localStorage.getItem('moonshotModel') || 'moonshot-v1-8k';
                
                // æ„å»ºå¸¦ä¸Šä¸‹æ–‡çš„messagesæ•°ç»„
                const messages = getContextMessages(message);
                
                const response = await fetch('https://api.moonshot.cn/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: messages,
                        temperature: 0.7,
                        max_tokens: 2000,
                        stream: false
                    })
                });
                
                removeLoadingMessage(loadingId);
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error?.message || `HTTPé”™è¯¯ ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                    throw new Error('APIè¿”å›æ•°æ®æ ¼å¼å¼‚å¸¸');
                }
                
                const reply = data.choices[0].message.content;
                
                // å°†å½“å‰å¯¹è¯æ·»åŠ åˆ°å†å²è®°å½•
                chatHistory.push({ role: 'user', content: message });
                chatHistory.push({ role: 'assistant', content: reply });
                
                // æ›´æ–°å†å²è®¡æ•°
                updateHistoryCount();
                
                // ä½¿ç”¨æ‰“å­—æœºæ•ˆæœæ˜¾ç¤º
                const messageDiv = addMessage('', 'assistant');
                currentTypewriter = new Typewriter(messageDiv, reply, 5);
                currentTypewriter.start();
                
            } catch (error) {
                removeLoadingMessage(loadingId);
                let errorMsg = error.message;
                if (error.message.includes('401')) {
                    errorMsg = 'API Keyæ— æ•ˆï¼Œè¯·æ£€æŸ¥å¯†é’¥æ˜¯å¦æ­£ç¡®';
                } else if (error.message.includes('429')) {
                    errorMsg = 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•';
                } else if (error.message.includes('500')) {
                    errorMsg = 'MoonshotæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·ç¨åå†è¯•';
                } else if (error.message.includes('insufficient_balance')) {
                    errorMsg = 'è´¦æˆ·ä½™é¢ä¸è¶³ï¼Œè¯·å……å€¼';
                } else if (error.message.includes('invalid_api_key')) {
                    errorMsg = 'API Keyæ ¼å¼é”™è¯¯';
                } else if (error.message.includes('context_length_exceeded')) {
                    errorMsg = 'å¯¹è¯è¿‡é•¿ï¼Œè¯·æ¸…ç©ºèŠå¤©è®°å½•åé‡è¯•';
                    // è‡ªåŠ¨æ¸…ç©ºä¸€åŠå†å²è®°å½•
                    if (chatHistory.length > 10) {
                        chatHistory = chatHistory.slice(-10);
                        showToast('å·²è‡ªåŠ¨æ¸…ç†æ—©æœŸå¯¹è¯è®°å½•');
                        updateHistoryCount();
                    }
                }
                
                const errorText = 'æŠ±æ­‰ï¼Œè°ƒç”¨Kimi APIæ—¶å‡ºç°é”™è¯¯ï¼š' + errorMsg + '\n\nè¯·æ£€æŸ¥ï¼š\n1. API Keyæ˜¯å¦æ­£ç¡®ï¼ˆä» https://platform.moonshot.cn/ è·å–ï¼‰\n2. è´¦æˆ·æ˜¯å¦æœ‰è¶³å¤Ÿä½™é¢\n3. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸';
                const messageDiv = addMessage('', 'assistant');
                currentTypewriter = new Typewriter(messageDiv, errorText, 3);
                currentTypewriter.start();
            }
        }

        function addMessage(text, role) {
            const container = document.getElementById('chatMessages');
            const div = document.createElement('div');
            div.className = 'flex gap-3 animate-fade-in ' + (role === 'user' ? 'flex-row-reverse' : '');
            
            const avatar = role === 'user' ? 
                '<div class="w-8 h-8 rounded-full bg-gray-600 flex-shrink-0 flex items-center justify-center text-xs">ğŸ‘¤</div>' :
                '<div class="w-8 h-8 rounded-full bg-slate-800 border border-gray-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-md">ğŸ§ </div>';
            
            const bubble = document.createElement('div');
            bubble.className = `chat-message markdown-content ${role === 'user' ? 'bg-orange-600 rounded-2xl rounded-tr-none text-white' : 'bg-gray-700/50 rounded-2xl rounded-tl-none border border-gray-600'} p-4 text-sm`;
            
            if (role === 'user') {
                bubble.innerHTML = MarkdownParser.parse(text);
            }
            
            div.innerHTML = avatar;
            div.appendChild(bubble);
            container.appendChild(div);
            
            container.scrollTop = container.scrollHeight;
            
            return bubble;
        }

        function addLoadingMessage() {
            const container = document.getElementById('chatMessages');
            const id = 'loading-' + Date.now();
            const div = document.createElement('div');
            div.id = id;
            div.className = 'flex gap-3 animate-fade-in';
            div.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-slate-800 border border-gray-600 flex-shrink-0 flex items-center justify-center text-xs text-white shadow-md">ğŸ§ </div>
                <div class="chat-message bg-gray-700/50 rounded-2xl rounded-tl-none p-3 text-sm flex items-center gap-2">
                    <div class="flex gap-1">
                        <div class="w-2 h-2 bg-orange-400 rounded-full animate-bounce"></div>
                        <div class="w-2 h-2 bg-orange-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                        <div class="w-2 h-2 bg-orange-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    </div>
                    <span class="text-gray-400">Kimiæ€è€ƒä¸­...</span>
                </div>
            `;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
            return id;
        }

        function removeLoadingMessage(id) {
            const el = document.getElementById(id);
            if (el) el.remove();
        }

        // æœç´¢å’Œè¿‡æ»¤
        function searchElements(query) {
            const cards = document.querySelectorAll('.element-card');
            const lowerQuery = query.toLowerCase();
            
            cards.forEach(card => {
                const symbol = card.dataset.symbol.toLowerCase();
                const name = card.dataset.name.toLowerCase();
                const number = card.dataset.number;
                
                if (symbol.includes(lowerQuery) || name.includes(lowerQuery) || number === query) {
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1.05)';
                    card.style.borderColor = '#E86C3A';
                } else {
                    card.style.opacity = '0.2';
                    card.style.transform = 'scale(1)';
                    card.style.borderColor = 'rgba(75, 85, 99, 0.3)';
                }
            });
        }

        function filterByCategory(category) {
            const cards = document.querySelectorAll('.element-card');
            
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                    card.style.opacity = '1';
                    card.style.transform = 'scale(1)';
                } else {
                    card.style.opacity = '0.1';
                    setTimeout(() => {
                        if (card.style.opacity === '0.1') {
                            card.style.display = 'none';
                        }
                    }, 300);
                }
            });
        }

        // è®¾ç½®ç®¡ç†
        function toggleSettings() {
            const modal = document.getElementById('settingsModal');
            modal.classList.toggle('hidden');
        }

        function saveSettings() {
            const apiKey = document.getElementById('settingsApiKey').value;
            const model = document.getElementById('modelSelect').value;
            
            if (apiKey) {
                localStorage.setItem('moonshotApiKey', apiKey);
                document.getElementById('moonshotApiKey').value = apiKey;
            }
            localStorage.setItem('moonshotModel', model);
            toggleSettings();
            showToast('è®¾ç½®å·²ä¿å­˜');
        }

        function loadSettings() {
            const apiKey = localStorage.getItem('moonshotApiKey');
            const model = localStorage.getItem('moonshotModel');
            
            if (apiKey) {
                document.getElementById('moonshotApiKey').value = apiKey;
                document.getElementById('settingsApiKey').value = apiKey;
            }
            if (model) {
                document.getElementById('modelSelect').value = model;
            }
        }

        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-orange-600 text-white px-6 py-3 rounded-full shadow-lg z-50 animate-float';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // ç‚¹å‡»å¤–éƒ¨å…³é—­
        document.addEventListener('click', (e) => {
            if (e.target.id === 'settingsModal') {
                toggleSettings();
            }
        });
        
        // åŒå‡»èŠå¤©æ¡†è·³è¿‡åŠ¨ç”»
        document.getElementById('chatMessages').addEventListener('dblclick', (e) => {
            if (currentTypewriter && e.target.closest('.markdown-content')) {
                currentTypewriter.skip();
                currentTypewriter = null;
            }
        });
    </script>
</body>
</html>
